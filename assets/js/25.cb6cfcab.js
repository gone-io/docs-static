(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{279:function(t,s,n){t.exports=n.p+"assets/img/image9.48d32078.png"},280:function(t,s,n){t.exports=n.p+"assets/img/image10.91a30027.png"},356:function(t,s,n){"use strict";n.r(s);var a=n(10),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"web-mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-mysql"}},[t._v("#")]),t._v(" Web + MySQL")]),t._v(" "),s("p",[t._v("在本文中，我将演示如何创建一个可运行在生产环境的Web项目，并对项目做简单的介绍。项目的使用MySql作为数据库，使用docker-compose管理容器。")]),t._v(" "),s("h2",{attrs:{id:"安装gone辅助工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装gone辅助工具"}},[t._v("#")]),t._v(" 安装gone辅助工具")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("go "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" github.com/gone-io/gone/tools/gone@latest\n")])])]),s("p",[t._v("关于gone命令，更多参考："),s("a",{attrs:{href:"https://goner.fun/zh/references/gone-tool.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("gone辅助工具"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"使用gone命令创建项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用gone命令创建项目"}},[t._v("#")]),t._v(" 使用gone命令创建项目")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("gone create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" web+mysql web-mysql-docker\n")])])]),s("p",[t._v("上面命令会在当前目录中创建一个名为web-mysql-docker的目录。")]),t._v(" "),s("h2",{attrs:{id:"编译并运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译并运行"}},[t._v("#")]),t._v(" 编译并运行")]),t._v(" "),s("blockquote",[s("p",[t._v("假设你已经安装了"),s("code",[t._v("make")]),t._v("；如果没有安装请先安装，参考："),s("a",{attrs:{href:"https://blog.csdn.net/waitdeng/article/details/138849321",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装make"),s("OutboundLink")],1),t._v("。"),s("br"),t._v("\n建设你已经安装了"),s("code",[t._v("docker")]),t._v(" 和 "),s("code",[t._v("docker compose")]),t._v("；如果没有，参考: https://docs.docker.com/engine/install/。")])]),t._v(" "),s("p",[t._v("执行系列命令")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入项目目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" web-mysql-docker\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成Priest函数：https://goner.fun/zh/guide/auto-gen-priest.html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" gone\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动MySql服务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" compose up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" mysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译并运行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" run\n")])])]),s("p",[t._v("日志打印如下：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("➜  web-mysql-docker "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" run\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" gone\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" install-gone\ngo "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" github.com/gone-io/gone/tools/gone@latest\ngo mod tidy\ngo generate ./"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\ngo run cmd/server/main.go\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/heaven\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/cemetery\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/tracer/tracer\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/logrus/logger\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/config/config\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/config/propertiesConfigure\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/logrus/logger\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Use Env: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("WARNING"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("properties: /var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build521033176/b001/exe/config/default.properties not found. skipping\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.574"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("WARNING"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("properties: /var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build521033176/b001/exe/config/local.properties not found. skipping\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/config/config\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/config/propertiesConfigure\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/xorm/engine\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/cmux/server\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/gin/proxy\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/gin/router\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/gin/sysProcessor\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/gin/responser\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/gin/server\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github.com/gone-io/gone/goner/gin/httpInjector\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/controller/demoController\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/middleware/AuthorizeMiddleware\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/middleware/PubMiddleware\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/module/demo/db\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/module/demo/demoService\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/router/authRouter\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.575"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive web-mysql/internal/router/pubRouter\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("WARNING"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Running "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"debug"')]),t._v(" mode. Switch to "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release"')]),t._v(" mode "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" production.\n - using env:   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GIN_MODE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("release\n - using code:  gin.SetMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gin.ReleaseMode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/demo/show            --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func5 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/demo2/show           --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func5 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/demo2/error          --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func5 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/demo2/echo           --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func5 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/inject-query         --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/inject/:key          --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" POST   /api/inject-http-body     --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/inject-http-struct   --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" POST   /api/users                --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/users                --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/users/page           --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" GET    /api/users/:id            --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" PUT    /api/users/:id            --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("GIN-debug"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" DELETE /api/users/:id            --"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github.com/gone-io/gone/goner/gin."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".Proxy."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("*proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".proxyOne.func8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" handlers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.576"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/Users/jim/go/pkg/mod/github.com/gone-io/gone@v0.3.1/goner/gin/server.go:46"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("Server Listen At :8080\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.576"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/Users/jim/go/pkg/mod/xorm.io/xorm@v1.3.2/log/logger_context.go:90"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("PING DATABASE mysql\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.585"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/Users/jim/go/pkg/mod/github.com/gone-io/gone@v0.3.1/cemetery.go:329"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("Revive "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Anonymous Goner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v("-05-14 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v(":42:03.585"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("INFO"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("/Users/jim/works/gone-io/web-app/demo/web-mysql-docker/cmd/server/main.go:28"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("before start\n")])])]),s("h2",{attrs:{id:"测试接口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试接口"}},[t._v("#")]),t._v(" 测试接口")]),t._v(" "),s("p",[t._v("我这里使用Goland内置Http Request插件测试。\n使用Goland打开项目，打开文件"),s("code",[t._v("tests/api/user.http")]),t._v("，选择"),s("code",[t._v("dev")]),t._v("环境运行，如下：\n"),s("img",{attrs:{src:n(279),alt:"运行"}})]),t._v(" "),s("p",[t._v("执行结果：\n"),s("img",{attrs:{src:n(280),alt:"结果"}})]),t._v(" "),s("h2",{attrs:{id:"项目简单介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目简单介绍"}},[t._v("#")]),t._v(" 项目简单介绍")]),t._v(" "),s("h3",{attrs:{id:"目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("├── Dockerfile\n├── Makefile\n├── README.md\n├── cmd\n│   └── server\n│       └── main.go "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#项目main方法所在文件")]),t._v("\n├── config          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#项目配置目录")]),t._v("\n│   ├── default.properties "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#默认配置")]),t._v("\n│   ├── dev.properties     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#开发环境配置")]),t._v("\n│   ├── local.properties   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#本地环境配置")]),t._v("\n│   └── prod.properties    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#生产环境配置")]),t._v("\n├── docker-compose.yaml    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker-compose，定义了mysql 和 web 两个容器")]),t._v("\n├── go.mod\n├── internal\n│   ├── controller         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Controller")]),t._v("\n│   │   └── demo_ctr.go\n│   ├── interface          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#接口目录")]),t._v("\n│   │   ├── domain         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#领域模型")]),t._v("\n│   │   │   ├── demo.go\n│   │   │   ├── page.go\n│   │   │   └── user.go\n│   │   ├── entity         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#实体模型")]),t._v("\n│   │   │   └── User.go\n│   │   └── "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#服务接口")]),t._v("\n│   │       └── i_demo.go  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#一个文件一般只放一个接口，文件名以`i_开口`，接口名以 `I`卡头，比如`IDemo`")]),t._v("\n│   ├── master.go\n│   ├── middleware         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#中间件目录，可以定义鉴权等统一处理逻辑")]),t._v("\n│   │   ├── authorize.go\n│   │   └── pub.go\n│   ├── module             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#模块目录")]),t._v("\n│   │   └── demo           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#demo模块")]),t._v("\n│   │       ├── db.go      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#demo目录的数据库接口的实现")]),t._v("\n│   │       ├── demo_svc.go "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#demo Service，实现了`service.IDemo`接口")]),t._v("\n│   │       ├── error.go    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当前目录错误码定义")]),t._v("\n│   │       └── i_db.go    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#demo目录的数据库接口")]),t._v("\n│   ├── pkg                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#公共工具目录")]),t._v("\n│   │   └── utils\n│   │       └── error.go\n│   ├── priest.go         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gone create 创建是没有该文件，运行 `make gone`生成的")]),t._v("\n│   └── router            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#路由目录")]),t._v("\n│       ├── auth_router.go "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义了需要鉴权的的路由组")]),t._v("\n│       └── pub_router.go  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义了无需鉴权的的路由组")]),t._v("\n├── scripts                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 脚本目录，用于存放一些脚本")]),t._v("\n│   └── mysql\n│       └── initdb.d       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#mysql initdb.d目录，docker-compose中定义的mysql首次启动时 会执行该目录下所有sql文件")]),t._v("\n│           └── user.sql\n└── tests                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#集成测试目录")]),t._v("\n    └── api                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#接口测试目录")]),t._v("\n        ├── demo.http\n        ├── http-client.env.json\n        └── user.http\n")])])]),s("h3",{attrs:{id:"项目特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目特点"}},[t._v("#")]),t._v(" 项目特点")]),t._v(" "),s("ul",[s("li",[t._v("开箱可用，无需额外配置直接可以运行")]),t._v(" "),s("li",[t._v("生成了"),s("code",[t._v("Dockerfile")]),t._v("，方便部署到各种容器环境")]),t._v(" "),s("li",[t._v("使用Makefile整合了gone、go、docker、docker compose等命令")]),t._v(" "),s("li",[t._v("自动生成Priest函数，使开发更顺畅")]),t._v(" "),s("li",[t._v("使用了gone框架，引入了依赖注入")]),t._v(" "),s("li",[t._v("使用接口解耦")]),t._v(" "),s("li",[t._v("支持分环境编写配置")]),t._v(" "),s("li",[t._v("集成了MySQL数据库")])]),t._v(" "),s("h3",{attrs:{id:"部分代码讲解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部分代码讲解"}},[t._v("#")]),t._v(" 部分代码讲解")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// demo数据 user 的增删改查，挂载到authRouter只为方便演示")]),t._v("\n\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\tpubRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Body注入，根据contentType将HTTP正文解析为一个结构体，支持json、xml、form-data、x-www-form-urlencoded 等 contentType")]),t._v("\n\t\t\treq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("domain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,body"`')]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demoSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CreateUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demoSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListUsers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/page"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tquery domain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PageQuery "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Query注入")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demoSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PageUsers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/:id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tid "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,param"`')]),t._v("              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Url参数注入，将注入路由上定义的`:id`")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demoSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetUserById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PUT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/:id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tid  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,param"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Url参数注入，将注入路由上定义的`:id`")]),t._v("\n\t\t\treq "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("domain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("User "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,body"`')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Body注入")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demoSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("UpdateUserById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("DELETE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/:id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tid "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,param"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Url参数注入，将注入路由上定义的`:id`")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("demoSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("DeleteUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n")])])]),s("p",[t._v("上面代码截取于"),s("code",[t._v("internal/controller/demo_ctr.go")]),t._v("文件。")]),t._v(" "),s("h3",{attrs:{id:"http-注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-注入"}},[t._v("#")]),t._v(" HTTP 注入")]),t._v(" "),s("p",[t._v("可以看到，"),s("strong",[t._v("Gone")]),t._v("在路由处理函数上也支持了"),s("strong",[t._v("依赖注入")]),t._v("；注入的方式是在使用一个匿名结构体作为处理函数的入参，并给结构体属性做特殊标记。\n上面代码用的注入标签：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('gone:"http,body"')]),t._v("，Body注入，根据contentType将HTTP正文解析为一个结构体，支持json、xml、form-data、x-www-form-urlencoded 等 contentType，要求被注入的结构体属性的数据类型为"),s("strong",[t._v("结构体")]),t._v("或者"),s("strong",[t._v("结构体指针")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v('gone:"http,query"')]),t._v("，Query注入，被注入的结构体属性的数据类型可以为"),s("strong",[t._v("结构体")]),t._v("、"),s("strong",[t._v("结构体指针")]),t._v("、"),s("strong",[t._v("字符串")]),t._v("、"),s("strong",[t._v("Number（int、uint、float64 ...）")]),t._v(" 和 "),s("strong",[t._v("字符串或Number的Slice")]),t._v("；")]),t._v(" "),s("li",[s("code",[t._v('gone:"http,param"')]),t._v("，Url参数注入，将注入路由上定义的参数；要求被注入的结构体属性的数据类型为"),s("strong",[t._v("字符串")]),t._v("或"),s("strong",[t._v("Number类型")]),t._v("。")])]),t._v(" "),s("p",[t._v("下面对Query注入，句几个例子：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Q "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Page "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"page"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用form标签指定参数名为page，默认是属性名Page")]),t._v("\n    PageSize "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"pageSize"`')]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用form标签指定参数名为pageSize，默认是属性名PageSize")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    page "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//未指定query参数名，去属性名为key")]),t._v("\n    thePage "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=page"`')]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//指定query参数名为page")]),t._v("\n    size "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=pageSize`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//指定query参数名为pageSize")]),t._v("\n\n    q "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("Q "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//被注入类型为一个结构体")]),t._v("\n    keywords "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=keywords"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用数组结构，允许Query参数出现多次")]),t._v("\n    oneKeyword "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=keywords"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不使用数组，只获取Query中的第一个keyword")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//todo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("假设某个请求的Query为："),s("code",[t._v("?page=10&pageSize=20&keywords=today&keywords=weather")]),t._v("，使用上面"),s("code",[t._v("handle")]),t._v("处理请求，参数"),s("code",[t._v("in")]),t._v("的值如下：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("in.page")]),t._v("  = 10")]),t._v(" "),s("li",[s("code",[t._v("in.thePage")]),t._v(" = 10")]),t._v(" "),s("li",[s("code",[t._v("in.size")]),t._v(" = 20")]),t._v(" "),s("li",[s("code",[t._v("in.q")]),t._v(" = {Page = 10, PageSize = 20}")]),t._v(" "),s("li",[s("code",[t._v("in.keywords")]),t._v(" = [today, weather]")]),t._v(" "),s("li",[s("code",[t._v("in.oneKeyword")]),t._v(" = today")])]),t._v(" "),s("p",[t._v("另外，处理函数还支持注入一些特殊结构体或指针（推荐使用指针）：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("gone.Content")]),t._v(" 请求上下文")]),t._v(" "),s("li",[s("code",[t._v("http.Request")]),t._v(" Http请求")]),t._v(" "),s("li",[s("code",[t._v("http.Header")]),t._v("  请求头")]),t._v(" "),s("li",[s("code",[t._v("url.Url")]),t._v(" url")])]),t._v(" "),s("p",[t._v("框架还支持更多的注入标签和类型，请参考文档"),s("a",{attrs:{href:"https://goner.fun/zh/references/http-inject.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http 注入说明"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"请求处理函数参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求处理函数参数"}},[t._v("#")]),t._v(" 请求处理函数参数")]),t._v(" "),s("p",[t._v("请求处理函数返回参数可以为如下几种形式：")]),t._v(" "),s("ol",[s("li",[t._v("不返回参数")]),t._v(" "),s("li",[t._v("返回一个非"),s("code",[t._v("error")]),t._v("的参数")]),t._v(" "),s("li",[t._v("返回数据和"),s("code",[t._v("error")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);