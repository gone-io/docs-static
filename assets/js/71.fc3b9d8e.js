(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{364:function(t,s,n){"use strict";n.r(s);var a=n(10),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"http-注入说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-注入说明"}},[t._v("#")]),t._v(" HTTP 注入说明")]),t._v(" "),s("h2",{attrs:{id:"http-依赖注入标签的格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-依赖注入标签的格式"}},[t._v("#")]),t._v(" HTTP 依赖注入标签的格式")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('${attributeName} ${attributeType} gone:"http,${kind}=${key}"\n')])])]),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/search"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    selects "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=select"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注入值in.selects为`[]int{1,2,3}`")]),t._v("\n    fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%v"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selects"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("上面例子中，")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("selects")]),t._v("为属性名（attributeName）；")]),t._v(" "),s("li",[s("code",[t._v("[]int")]),t._v("为属性类型（attributeType）；")]),t._v(" "),s("li",[s("code",[t._v("query")]),t._v("为注入类型（kind）；")]),t._v(" "),s("li",[s("code",[t._v("select")]),t._v("为注入键值（key）。")])]),t._v(" "),s("h2",{attrs:{id:"支持注入的类型和响应标签"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#支持注入的类型和响应标签"}},[t._v("#")]),t._v(" 支持注入的类型和响应标签")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("属性类型"),s("code",[t._v("${attributeType}")])]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("注入类型"),s("code",[t._v("${kind}")])]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("注入键值"),s("code",[t._v("${key}")])]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("上下文注入")])]),t._v(" "),s("td",[s("code",[t._v("gone.Context")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("（不推荐）注入gin请求上下文对象，不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("上下文注入")])]),t._v(" "),s("td",[s("code",[t._v("*gone.Context")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("（推荐）注入gin请求上下文指针，不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("请求注入")])]),t._v(" "),s("td",[s("code",[t._v("http.Request")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("不推荐）注入http.Request对象，不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("请求注入")])]),t._v(" "),s("td",[s("code",[t._v("*http.Request")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("（推荐）注入http.Request指针，不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("地址注入")])]),t._v(" "),s("td",[s("code",[t._v("url.URL")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("（不推荐）注入url.URL，不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("地址注入")])]),t._v(" "),s("td",[s("code",[t._v("*url.URL")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("（推荐）注入url.URL指针，不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("请求头注入")])]),t._v(" "),s("td",[s("code",[t._v("http.Header")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("（推荐）注入http.Header（请求头），不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("响应注入")])]),t._v(" "),s("td",[s("code",[t._v("gone.ResponseWriter")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("注入gin.ResponseWriter（用于直接写入响应数据），不需要类型"),s("code",[t._v("${kind}")]),t._v("和键值"),s("code",[t._v("${key}")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Body注入")])]),t._v(" "),s("td",[t._v("结构体、结构体指针")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("body")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("body注入")]),t._v("；将请求body解析后注入到属性，注入类型为 "),s("code",[t._v("body")]),t._v("，不需要“注入键值"),s("code",[t._v("${key}")]),t._v("”；框架根据"),s("code",[t._v("Content-Type")]),t._v("自动判定是json还是xml等格式；每个请求处理函数只允许存在一个"),s("strong",[t._v("body注入")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("请求头单值注入")])]),t._v(" "),s("td",[t._v("number | string")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("header")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("缺省取字段名")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("以键值"),s("code",[t._v("${key}")]),t._v("为"),s("code",[t._v("key")]),t._v("获取请求头，属性类型支持 简单类型"),s("sub",[t._v("[1]")]),t._v("，解析不了会返回参数错误")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("URL路径参数注入")])]),t._v(" "),s("td",[t._v("number | string")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("param")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("缺省取字段名")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("以“注入键值"),s("code",[t._v("${key}")]),t._v("”为"),s("code",[t._v("key")]),t._v("调用函数"),s("code",[t._v("ctx.Param(key)")]),t._v("获取Url中定义的参数值，属性类型支持 简单类型"),s("sub",[t._v("[1]")]),t._v("，解析不了会返回参数错误")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Query参数注入")])]),t._v(" "),s("td",[t._v("number | string | []number | []string | 结构体 | 结构体指针")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("query")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("缺省取字段名")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("以“注入键值"),s("code",[t._v("${key}")]),t._v("”为"),s("code",[t._v("key")]),t._v("调用函数"),s("code",[t._v("ctx.Query(key)")]),t._v("获取Query中的参数，属性类型支持 简单类型"),s("sub",[t._v("[1]")]),t._v("，"),s("strong",[t._v("支持简单类型的数组")]),t._v("，支持结构体和结构体指针，解析不了会返回参数错误")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Cookie注入")])]),t._v(" "),s("td",[t._v("number | string")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("cookie")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("缺省取字段名")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("以“注入键值"),s("code",[t._v("${key}")]),t._v("”为"),s("code",[t._v("key")]),t._v("调用函数"),s("code",[t._v("ctx.Context.Cookie(key)")]),t._v("获取Cookie的值，属性类型支持 简单类型"),s("sub",[t._v("[1]")]),t._v("，解析不了会返回参数错误")])])])]),t._v(" "),s("h2",{attrs:{id:"query参数注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#query参数注入"}},[t._v("#")]),t._v(" Query参数注入")]),t._v(" "),s("h3",{attrs:{id:"属性类型为简单类型-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性类型为简单类型-1"}},[t._v("#")]),t._v(" 属性类型为简单类型"),s("sub",[t._v("[1]")])]),t._v(" "),s("p",[t._v("解析不了会返回参数错误。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tyourName "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=name"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注册请求query中的name参数")]),t._v("\n\t\t\t\tname "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注册请求query中的name参数；不指定参数名，则取属性名作为参数名")]),t._v("\n                age "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=age"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//int类型")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, %s, your name is %s"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yourName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"属性类型为简单类型的数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性类型为简单类型的数组"}},[t._v("#")]),t._v(" 属性类型为简单类型的数组")]),t._v(" "),s("p",[t._v("解析不了会返回参数错误。\n下面代码，query为"),s("code",[t._v("?keyword=gone&keyword=is&keyword=best")]),t._v("，"),s("code",[t._v("in.keywords")]),t._v("的值将会为 "),s("code",[t._v('[]string{"gone","is","best"}')]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tkeywords "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=keyword"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//简单类型的query数组参数注入")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, keywords is [%v]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keywords"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"属性类型为结构体或者结构体指针"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性类型为结构体或者结构体指针"}},[t._v("#")]),t._v(" 属性类型为结构体或者结构体指针")]),t._v(" "),s("p",[t._v("这种类型key无需指定；假设query为"),s("code",[t._v("?page=1&pageSize=20&keyword=gone&keyword=is&keyword=best")]),t._v("，"),s("code",[t._v("in.req")]),t._v("的值将会为 "),s("code",[t._v('{1,20,[]string{"gone","is","best"}}')]),t._v("；注意结构体中可以使用"),s("code",[t._v("form")]),t._v("标签进行属性映射。")]),t._v(" "),s("p",[t._v("解析不了会返回参数错误。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Req "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tPage     "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"page"`')]),t._v("\n\t\tPageSize "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"pageSize"`')]),t._v("\n\t\tKeywords "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"keywords"`')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\treq Req "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query"`')]),t._v("\n                req2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("Req "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query"`')]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, keywords is [%v]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keywords"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"url路径参数注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url路径参数注入"}},[t._v("#")]),t._v(" URL路径参数注入")]),t._v(" "),s("p",[t._v("URL 路径参数，是指定义在URL路由中的参数，注入属性的类型支持"),s("code",[t._v("string")]),t._v("和"),s("code",[t._v("int")]),t._v(","),s("code",[t._v("uint")]),t._v(","),s("code",[t._v("float64")]),t._v("等数字类型，解析不了会返回参数错误。如下：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello/:name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//url中定义参数名为name")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tname "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,param"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不指定参数名，使用属性名作为参数名")]),t._v("\n\t\t\t\tname2 "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,param=name"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用key指定参数名")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"body注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#body注入"}},[t._v("#")]),t._v(" Body注入")]),t._v(" "),s("p",[t._v("Body注入，是指读取HTTP请求正文内容，解析成结构体，注入属性的类型支持结构体、结构体指针，解析不了会返回参数错误。")]),t._v(" "),s("p",[t._v("支持多种ContentType：json、xml、form-data、form-urlencoded等，不传ContentType时，默认为application/x-www-form-urlencoded。")]),t._v(" "),s("p",[t._v("结构体可以使用"),s("code",[t._v("form")]),t._v("标签进行form-data、form-urlencoded的属性映射；"),s("code",[t._v("xml")]),t._v("标签进行xml的属性映射；"),s("code",[t._v("json")]),t._v("标签进行json的属性映射。")]),t._v(" "),s("p",[t._v("具体规则可以参考："),s("a",{attrs:{href:"https://github.com/gin-gonic/gin/blob/master/docs/doc.md#model-binding-and-validation",target:"_blank",rel:"noopener noreferrer"}},[t._v("gin#Model binding and validation"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("举例如下：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Req "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tPage     "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"page" json:"page,omitempty" xml:"page" binding:"required"`')]),t._v("\n\t\tPageSize "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"pageSize" json:"pageSize,omitempty" xml:"pageSize" binding:"required"`')]),t._v("\n\t\tKeywords "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`form:"keywords" json:"keywords,omitempty" xml:"keywords" binding:"required"`')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\treq Req "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,body"`')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注意：body只能被注入一次，因为 writer被读取后就变成空了")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// req2 *Req `gone:"http,body"`')]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, keywords is [%v]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keywords"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"请求头注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求头注入"}},[t._v("#")]),t._v(" 请求头注入")]),t._v(" "),s("p",[t._v("HTTP请求头注入，用于获取某个请求头信息，注入属性的类型支持"),s("code",[t._v("string")]),t._v("和"),s("code",[t._v("int")]),t._v(","),s("code",[t._v("uint")]),t._v(","),s("code",[t._v("float64")]),t._v("等数字类型，解析不了会返回参数错误。\n比如下面代码，可以用于读取请求头中的"),s("code",[t._v("Content-Type")]),t._v("信息。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tcontentType "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,header"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不指定参数名，使用属性名作为参数名")]),t._v("\n\t\t\t\tcontentType2 "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,header=contentType"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用key指定参数名")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, contentType = "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contentType\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"cookie注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie注入"}},[t._v("#")]),t._v(" Cookie注入")]),t._v(" "),s("p",[t._v("Cookie注入，用于获取某个cookie信息，注入属性的类型支持"),s("code",[t._v("string")]),t._v("和"),s("code",[t._v("int")]),t._v(","),s("code",[t._v("uint")]),t._v(","),s("code",[t._v("float64")]),t._v("等数字类型，解析不了会返回参数错误。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\ttoken "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,cookie"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不指定参数名，使用属性名作为参数名")]),t._v("\n\t\t\t\ttoken2 "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,header=token"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用key指定参数名")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, your token in cookie is"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"高级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高级"}},[t._v("#")]),t._v(" 高级")]),t._v(" "),s("p",[t._v("另外，我们还支持几种特殊结构体（或结构体指针、接口、map）的注入，由于golang的“值拷贝”推荐使用指针注入，这些结构体代表了HTTP请求、响应、上下文等，这些结构体的注入不需要指定"),s("code",[t._v("kind")]),t._v("和"),s("code",[t._v("key")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"url结构体注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url结构体注入"}},[t._v("#")]),t._v(" URL结构体注入")]),t._v(" "),s("p",[t._v("支持属性类型为 "),s("code",[t._v("url.URL")]),t._v(" 或者 "),s("code",[t._v("*url.URL")]),t._v("，该类型定义在"),s("code",[t._v("net/url")]),t._v("包中，代表了HTTP请求的URL。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\turl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用结构体指针")]),t._v("\n\t\t\t\turl2 url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用结构体")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, your token in cookie is"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"请求头注入-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求头注入-2"}},[t._v("#")]),t._v(" 请求头注入")]),t._v(" "),s("p",[t._v("支持属性类型为 "),s("code",[t._v("http.Header")]),t._v("，该类型定义在"),s("code",[t._v("net/http")]),t._v("包中，代表了HTTP请求的Header。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\theader http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Header "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, your token in cookie is"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"上下文结构体注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上下文结构体注入"}},[t._v("#")]),t._v(" 上下文结构体注入")]),t._v(" "),s("p",[t._v("支持属性类型为 "),s("code",[t._v("gin.Content")]),t._v(" 或者 "),s("code",[t._v("*gin.Content")]),t._v("，该类型定义在"),s("code",[t._v("github.com/gin-gonic/gin")]),t._v("包中，代表了HTTP请求的上下文。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tcontext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用结构体指针")]),t._v("\n\t\t\t\tcontext2 gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用结构体")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, your token in cookie is"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"请求结构体注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求结构体注入"}},[t._v("#")]),t._v(" 请求结构体注入")]),t._v(" "),s("p",[t._v("支持属性类型为 "),s("code",[t._v("http.Request")]),t._v(" 或者 "),s("code",[t._v("*http.Request")]),t._v("，该类型定义在"),s("code",[t._v("net/http")]),t._v("包中，代表了HTTP请求信息。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\trequest "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用结构体指针")]),t._v("\n\t\t\t\trequest2 http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用结构体")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, your token in cookie is"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"请求响应接口注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求响应接口注入"}},[t._v("#")]),t._v(" 请求响应接口注入")]),t._v(" "),s("p",[t._v("支持属性类型为 "),s("code",[t._v("gin.ResponseWriter")]),t._v("，该类型定义在"),s("code",[t._v("github.com/gin-gonic/gin")]),t._v("包中，代表了HTTP响应信息，可以使用该接口响应请求信息。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("\tctr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/demo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\twriter gin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ResponseWriter "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http"`')]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello, your token in cookie is"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" in"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"备注"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备注"}},[t._v("#")]),t._v(" 备注")]),t._v(" "),s("p",[t._v("[1]. 简单类型指 字符串、布尔类型 和 数字类型，其中数字类型包括：")]),t._v(" "),s("ul",[s("li",[t._v("整数类型：int、uint、int8、uint8、int16、uint16、int32、uint32、int64、uint64")]),t._v(" "),s("li",[t._v("非负整数类型：uint、uint8、uint16、uint32、uint64")]),t._v(" "),s("li",[t._v("浮点类型：float32、float64")])])])}),[],!1,null,null,null);s.default=e.exports}}]);