(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{351:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"通过内置goners支持数据库操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过内置goners支持数据库操作"}},[t._v("#")]),t._v(" 通过内置Goners支持数据库操作")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#以mysql举个例子-源代码在-这里-https-github-com-gone-io-gone-tree-main-example-use-rdb-可以找到"}},[t._v("以Mysql举个例子，源代码在这里可以找到")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-准备mysql服务-可以使用docker-compose快速启动一个mysql服务"}},[t._v("1.准备mysql服务，可以使用docker-compose快速启动一个Mysql服务")])]),s("li",[s("a",{attrs:{href:"#_2-创建mod和配置"}},[t._v("2. 创建mod和配置")])]),s("li",[s("a",{attrs:{href:"#_3-编写代码如下"}},[t._v("3. 编写代码如下：")])]),s("li",[s("a",{attrs:{href:"#_3-运行代码"}},[t._v("3. 运行代码")])])])]),s("li",[s("a",{attrs:{href:"#需要注意的点"}},[t._v("需要注意的点")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-github-com-gone-io-gone-goner-是对-xorm-io-xorm-的封装"}},[t._v("1. github.com/gone-io/gone/goner 是对 xorm.io/xorm 的封装")])]),s("li",[s("a",{attrs:{href:"#_2-通过-gone-xorm-gonerid-注入"}},[t._v("2. 通过gone-xormGonerId注入")])]),s("li",[s("a",{attrs:{href:"#_3-注意导入的包"}},[t._v("3. 注意导入的包")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"以mysql举个例子-源代码在这里可以找到"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#以mysql举个例子-源代码在这里可以找到"}},[t._v("#")]),t._v(" 以Mysql举个例子，源代码在"),s("a",{attrs:{href:"https://github.com/gone-io/gone/tree/main/example/use-rdb",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("可以找到")]),t._v(" "),s("h3",{attrs:{id:"_1-准备mysql服务-可以使用docker-compose快速启动一个mysql服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备mysql服务-可以使用docker-compose快速启动一个mysql服务"}},[t._v("#")]),t._v(" 1.准备mysql服务，可以使用docker-compose快速启动一个Mysql服务")]),t._v(" "),s("p",[t._v("docker-compose.yaml 内容如下：")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.5"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.3")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_DATABASE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" demo\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./data/mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/lib/mysql\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3306:3306"')]),t._v("\n")])])]),s("p",[t._v("命令行执行下面代码，启动mysql服务：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" docker-compose.yaml up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-创建mod和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建mod和配置"}},[t._v("#")]),t._v(" 2. 创建mod和配置")]),t._v(" "),s("p",[t._v("执行如下命令：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" use-rdb\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" use-rdb\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建mod")]),t._v("\ngo mod init use-rdb\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建数据库配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" config\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" config/default.properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("eof\n\n# 配置使用mysql数据库\ndatabase.driver-name=mysql\n\n#数据源\ndatabase.dsn=root:123456@tcp(localhost:3306)/demo?charset=utf8mb4&loc=Local\neof")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-编写代码如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-编写代码如下"}},[t._v("#")]),t._v(" 3. 编写代码如下：")]),t._v(" "),s("p",[t._v("文件名：main.go")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/go-sql-driver/mysql"')]),t._v(" #⭐️需要特别注意，需要引入mysql的驱动\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone/goner"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone/goner/xorm"')]),t._v(" #⭐️需要特别注意，导入的是gone封装的xorm包\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Demo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tId   "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\tData "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" SqlExecutor "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tgone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Flag\n\tdb xorm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"gone-xorm"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("SqlExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步表结构")]),t._v("\n\terr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tdemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" Demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello gone"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入数据")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        Demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The most Spring programmer-friendly Golang framework, dependency injection, integrates Web. "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo: %v\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("Demo\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 读取数据")]),t._v("\n\terr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo records:%v\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tgone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Prepare")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cemetery gone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cemetery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 goner.XormPriest 将xorm相关的Goner埋葬到 cemetery")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" goner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("XormPriest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cemetery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t\tcemetery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Bury")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("SqlExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在Gone启动完成后执行")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AfterStart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\te SqlExecutor "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"*"`')]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-运行代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-运行代码"}},[t._v("#")]),t._v(" 3. 运行代码")]),t._v(" "),s("p",[t._v("执行如下命令：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("go mod tidy\ngo run main.go\n")])])]),s("p",[t._v("运行结果如下：")]),t._v(" "),s("div",{staticClass:"language-log extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br")]),s("pre",{pre:!0,attrs:{class:"language-log"}},[s("code",[s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.767")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("heaven\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cemetery\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tracer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tracer\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logrus"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logger\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("propertiesConfigure\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logrus"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logger\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Use Env"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" local\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level warning important"}},[t._v("WARNING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties:")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build1582606196/b001/exe/config/default.properties")]),t._v(" not found"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" skipping\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level warning important"}},[t._v("WARNING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties:")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build1582606196/b001/exe/config/local.properties")]),t._v(" not found"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" skipping\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level warning important"}},[t._v("WARNING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties:")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/Users/jim/works/gone-io/gone/example/use-rdb/config/local.properties")]),t._v(" not found"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" skipping\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("propertiesConfigure\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xorm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("engine\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive main"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("SqlExecutor\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.769")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/Users/jim/go/pkg/mod/xorm.io/xorm@v1.3.2/log/logger_context.go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("PING DATABASE mysql\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.783")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/Users/jim/works/gone-io/gone/cemetery.go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("307")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\ndemo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" hello gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),t._v("\ndemo records"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" hello gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" The most Spring programmer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("friendly Golang framework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependency injection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" integrates Web"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"需要注意的点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需要注意的点"}},[t._v("#")]),t._v(" 需要注意的点")]),t._v(" "),s("h3",{attrs:{id:"_1-github-com-gone-io-gone-goner-是对-xorm-io-xorm-的封装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-github-com-gone-io-gone-goner-是对-xorm-io-xorm-的封装"}},[t._v("#")]),t._v(" 1. "),s("code",[t._v("github.com/gone-io/gone/goner")]),t._v(" 是对 "),s("code",[t._v("xorm.io/xorm")]),t._v(" 的封装")]),t._v(" "),s("p",[t._v("封装的大概逻辑是：将xorm包装为一个"),s("a",{attrs:{href:"https://goner.fun/zh/guide/core-concept.html#%F0%9F%98%87angel-%E5%A4%A9%E4%BD%BF",target:"_blank",rel:"noopener noreferrer"}},[t._v("Angel Goner"),s("OutboundLink")],1),t._v(";在Start方法中完成数据的连接；在Stop方法中关闭数据库连接。使用时不需要导入"),s("code",[t._v("xorm.io/xorm")]),t._v("包，只需要导入"),s("code",[t._v("github.com/gone-io/gone/goner")]),t._v("即可。封装中依赖了"),s("code",[t._v("github.com/gone-io/gone/tree/main/goner/config")]),t._v("来实现配置，在"),s("code",[t._v("goner.XormPriest")]),t._v("函数中已经自动完成了配置相关的Goner的"),s("a",{attrs:{href:"https://goner.fun/zh/guide/core-concept.html#bury-%E5%9F%8B%E8%91%AC",target:"_blank",rel:"noopener noreferrer"}},[t._v("埋葬"),s("OutboundLink")],1),t._v("。\n配置文件中支持的配置项：")]),t._v(" "),s("ul",[s("li",[t._v("database.driver-name 驱动的名称，支持 mysql、postgres 等主流数据库，具体可以参考 "),s("a",{attrs:{href:"https://xorm.io/zh/docs/chapter-01/1.engine/",target:"_blank",rel:"noopener noreferrer"}},[t._v("xorm文档"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("database.dsn 数据源，参考 "),s("a",{attrs:{href:"https://xorm.io/zh/docs/chapter-01/1.engine/",target:"_blank",rel:"noopener noreferrer"}},[t._v("xorm文档"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("database.max-idle-count 连接池，最大空闲连接数")]),t._v(" "),s("li",[t._v("database.max-open 连接池，最大连接数")]),t._v(" "),s("li",[t._v("database.max-lifetime 最大生存时间")]),t._v(" "),s("li",[t._v("database.showSql 是否打印执行的SQL")])]),t._v(" "),s("h3",{attrs:{id:"_2-通过gone-xormgonerid注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-通过gone-xormgonerid注入"}},[t._v("#")]),t._v(" 2. 通过"),s("code",[t._v("gone-xorm")]),s("strong",[t._v("GonerId")]),t._v("注入")]),t._v(" "),s("p",[t._v("在需要使用xorm引擎的Goner中，使用"),s("code",[t._v('gone:"gone-xorm"')]),t._v("标签注入"),s("code",[t._v("xorm.Engine")]),t._v("，属性可以具名也可以匿名：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" XormUser "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//具名")]),t._v("\n    db xorm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"gone-xorm"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" XormUser "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//匿名")]),t._v("\n    xorm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"gone-xorm"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在"),s("code",[t._v("xorm.Engine")]),t._v("中“继承”了"),s("code",[t._v("xorm.io/xorm.EngineInterface")]),t._v("接口，所以"),s("code",[t._v("xorm.Engine")]),t._v("支持"),s("a",{attrs:{href:"https://xorm.io/zh/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("xorm文档"),s("OutboundLink")],1),t._v("中的所有方法。")]),t._v(" "),s("h3",{attrs:{id:"_3-注意导入的包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-注意导入的包"}},[t._v("#")]),t._v(" 3. 注意导入的包")]),t._v(" "),s("ul",[s("li",[t._v("需要导入数据库的驱动，不同数据库导入不一样：")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/go-sql-driver/mysql"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("导入的xorm包是："),s("code",[t._v("github.com/gone-io/gone/goner/xorm")]),t._v("，不是"),s("code",[t._v("xorm.io/xorm")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone/goner/xorm"')]),t._v(" #⭐️需要特别注意，导入的是gone封装的xorm包\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);