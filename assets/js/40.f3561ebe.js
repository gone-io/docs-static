(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{331:function(t,v,_){"use strict";_.r(v);var e=_(10),n=Object(e.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"http-注入说明"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http-注入说明"}},[t._v("#")]),t._v(" http 注入说明")]),t._v(" "),v("h2",{attrs:{id:"http-依赖注入标签的格式"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#http-依赖注入标签的格式"}},[t._v("#")]),t._v(" http 依赖注入标签的格式")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v('${attributeName} ${attributeType} gone:"http,${kind}=${key}"\n')])])]),v("table",[v("thead",[v("tr",[v("th",[t._v("名称")]),t._v(" "),v("th",[t._v("属性类型"),v("code",[t._v("${attributeType}")])]),t._v(" "),v("th",[t._v("注入类型"),v("code",[t._v("${kind}")])]),t._v(" "),v("th",[t._v("注入键值"),v("code",[t._v("${key}")])]),t._v(" "),v("th",[t._v("说明")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[v("strong",[t._v("上下文注入")])]),t._v(" "),v("td",[v("code",[t._v("gin.Context")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（不推荐）注入"),v("code",[t._v("github.com/gone-io/gone/tree/main/goner/gin.Context")]),t._v("，不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("上下文注入")])]),t._v(" "),v("td",[v("code",[t._v("*gin.Context")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（推荐）使用指针注入"),v("code",[t._v("github.com/gone-io/gone/tree/main/goner/gin.Context")]),t._v("，不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("请求注入")])]),t._v(" "),v("td",[v("code",[t._v("http.Request")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("不推荐）注入http.Request对象，不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("请求注入")])]),t._v(" "),v("td",[v("code",[t._v("*http.Request")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（推荐）注入http.Request指针，不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("地址注入")])]),t._v(" "),v("td",[v("code",[t._v("url.URL")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（不推荐）注入url.URL，不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("地址注入")])]),t._v(" "),v("td",[v("code",[t._v("*url.URL")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（推荐）注入url.URL指针，不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("请求头注入")])]),t._v(" "),v("td",[v("code",[t._v("http.Header")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（推荐）注入http.Header（请求头），不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("响应注入")])]),t._v(" "),v("td",[v("code",[t._v("gin.ResponseWriter")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[t._v("（推荐）注入gin.ResponseWriter（用于直接写入响应数据），不需要 “注入类型"),v("code",[t._v("${kind}")]),t._v("”和“注入键值"),v("code",[t._v("${key}")]),t._v("”。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Body注入")])]),t._v(" "),v("td",[t._v("结构体、结构体指针")]),t._v(" "),v("td",[v("code",[t._v("body")])]),t._v(" "),v("td",[t._v("/")]),t._v(" "),v("td",[v("strong",[t._v("body注入")]),t._v("；将请求body解析后注入到属性，注入类型为 "),v("code",[t._v("body")]),t._v("，不需要“注入键值"),v("code",[t._v("${key}")]),t._v("”；框架根据"),v("code",[t._v("Content-Type")]),t._v("自动判定是json还是xml等格式；每个请求处理函数只允许存在一个"),v("strong",[t._v("body注入")]),t._v("。")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("请求头单值注入")])]),t._v(" "),v("td",[t._v("number | string")]),t._v(" "),v("td",[t._v("header")]),t._v(" "),v("td",[t._v("缺省取字段名")]),t._v(" "),v("td",[t._v("以“注入键值"),v("code",[t._v("${key}")]),t._v("”为"),v("code",[t._v("key")]),t._v("调用函数"),v("code",[t._v("ctx.Request.Header.Get(key)")]),t._v("获取请求头，属性类型支持"),v("code",[t._v("string")]),t._v("和"),v("code",[t._v("int")]),t._v(","),v("code",[t._v("uint")]),t._v(","),v("code",[t._v("float64")]),t._v("等数字类型，解析不了会返回参数错误")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("URL参数注入")])]),t._v(" "),v("td",[t._v("number | string")]),t._v(" "),v("td",[t._v("param")]),t._v(" "),v("td",[t._v("缺省取字段名")]),t._v(" "),v("td",[t._v("以“注入键值"),v("code",[t._v("${key}")]),t._v("”为"),v("code",[t._v("key")]),t._v("调用函数"),v("code",[t._v("ctx.Param(key)")]),t._v("获取Url中定义的参数值，属性类型支持"),v("code",[t._v("string")]),t._v("和"),v("code",[t._v("int")]),t._v(","),v("code",[t._v("uint")]),t._v(","),v("code",[t._v("float64")]),t._v("等数字类型，解析不了会返回参数错误")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Query参数注入")])]),t._v(" "),v("td",[t._v("number | string | []number | []string")]),t._v(" "),v("td",[t._v("query")]),t._v(" "),v("td",[t._v("缺省取字段名")]),t._v(" "),v("td",[t._v("以“注入键值"),v("code",[t._v("${key}")]),t._v("”为"),v("code",[t._v("key")]),t._v("调用函数"),v("code",[t._v("ctx.Query(key)")]),t._v("获取Query中的参数，属性类型支持"),v("code",[t._v("string")]),t._v("和"),v("code",[t._v("int")]),t._v(","),v("code",[t._v("uint")]),t._v(","),v("code",[t._v("float64")]),t._v("等数字类型，"),v("strong",[t._v("支持数组[1]")]),t._v("，解析不了会返回参数错误")])]),t._v(" "),v("tr",[v("td",[v("strong",[t._v("Cookie注入")])]),t._v(" "),v("td",[t._v("number | string")]),t._v(" "),v("td",[t._v("cookie")]),t._v(" "),v("td",[t._v("缺省取字段名")]),t._v(" "),v("td",[t._v("以“注入键值"),v("code",[t._v("${key}")]),t._v("”为"),v("code",[t._v("key")]),t._v("调用函数"),v("code",[t._v("ctx.Context.Cookie(key)")]),t._v("获取Cookie的值，属性类型支持"),v("code",[t._v("string")]),t._v("和"),v("code",[t._v("int")]),t._v(","),v("code",[t._v("uint")]),t._v(","),v("code",[t._v("float64")]),t._v("等数字类型，解析不了会返回参数错误")])])])]),t._v(" "),v("p",[t._v("[1].支持数组，举例说明如下：\n如果请求的query为"),v("code",[t._v("?select=1&select=2&select=3")]),t._v("，下面代码中的 "),v("code",[t._v("in.selects")]),t._v(" 的值将会为 "),v("code",[t._v("[]int{1,2,3}")]),t._v("。")]),t._v(" "),v("div",{staticClass:"language-go extra-class"},[v("pre",{pre:!0,attrs:{class:"language-go"}},[v("code",[t._v("router"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/search"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("function")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    selects "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),v("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"http,query=select"`')]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注入值in.selects为`[]int{1,2,3}`")]),t._v("\n    fmt"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%v"')]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" in"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selects"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);v.default=n.exports}}]);