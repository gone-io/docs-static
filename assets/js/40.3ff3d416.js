(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{328:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"supporting-database-operations-with-built-in-goners"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#supporting-database-operations-with-built-in-goners"}},[t._v("#")]),t._v(" Supporting Database Operations with Built-in Goners")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#example-with-mysql"}},[t._v("Example with MySQL")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-prepare-mysql-service"}},[t._v("1. Prepare MySQL Service")])]),s("li",[s("a",{attrs:{href:"#_2-create-module-and-configuration"}},[t._v("2. Create Module and Configuration")])]),s("li",[s("a",{attrs:{href:"#_3-write-code"}},[t._v("3. Write Code")])]),s("li",[s("a",{attrs:{href:"#_4-run-the-code"}},[t._v("4. Run the Code")])])])]),s("li",[s("a",{attrs:{href:"#points-to-note"}},[t._v("Points to Note")]),s("ul",[s("li",[s("a",{attrs:{href:"#_1-github-com-gone-io-gone-goner-is-a-wrapper-for-xorm-io-xorm"}},[t._v("1. github.com/gone-io/gone/goner is a wrapper for xorm.io/xorm")])]),s("li",[s("a",{attrs:{href:"#_2-injection-via-gone-xorm-gonerid"}},[t._v("2. Injection via gone-xorm GonerId")])]),s("li",[s("a",{attrs:{href:"#_3-pay-attention-to-imported-packages"}},[t._v("3. Pay Attention to Imported Packages")])])])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"example-with-mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-with-mysql"}},[t._v("#")]),t._v(" Example with MySQL")]),t._v(" "),s("h3",{attrs:{id:"_1-prepare-mysql-service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-prepare-mysql-service"}},[t._v("#")]),t._v(" 1. Prepare MySQL Service")]),t._v(" "),s("p",[t._v("You can quickly set up a MySQL service using Docker Compose. Create a "),s("code",[t._v("docker-compose.yaml")]),t._v(" file with the following content:")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.5"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.3")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_DATABASE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" demo\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./data/mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/lib/mysql\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3306:3306"')]),t._v("\n")])])]),s("p",[t._v("Run the following command in the terminal to start the MySQL service:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" docker-compose.yaml up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-create-module-and-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-create-module-and-configuration"}},[t._v("#")]),t._v(" 2. Create Module and Configuration")]),t._v(" "),s("p",[t._v("Execute the following commands to set up the project structure and configuration:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" use-rdb\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" use-rdb\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Initialize Go module")]),t._v("\ngo mod init use-rdb\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Create database configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" config\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" config/default.properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("eof\n\n# Use MySQL database\ndatabase.driver-name=mysql\n\n# Data Source Name (DSN)\ndatabase.dsn=root:123456@tcp(localhost:3306)/demo?charset=utf8mb4&loc=Local\neof")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-write-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-write-code"}},[t._v("#")]),t._v(" 3. Write Code")]),t._v(" "),s("p",[t._v("Create a file named "),s("code",[t._v("main.go")]),t._v(" with the following code:")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/go-sql-driver/mysql"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⚠️ Import MySQL driver explicitly")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone/goner"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone/goner/xorm"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⚠️ Import xorm package from gone")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Demo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tId   "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\tData "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" SqlExecutor "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tgone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Flag\n\tdb xorm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"gone-xorm"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("SqlExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Synchronize table structure")]),t._v("\n\terr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tdemo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" Demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello gone"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Insert data")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tDemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The most Spring programmer-friendly Golang framework, dependency injection, integrates Web. "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo: %v\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" demo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("Demo\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Read data")]),t._v("\n\terr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tfmt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"demo records:%v\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tgone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Prepare")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cemetery gone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Cemetery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Bury xorm-related Goners into the cemetery using goner.XormPriest")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" goner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("XormPriest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cemetery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t\t\tcemetery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Bury")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("SqlExecutor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Execute after the Gone application starts")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AfterStart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("in "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\te SqlExecutor "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"*"`')]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-run-the-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-run-the-code"}},[t._v("#")]),t._v(" 4. Run the Code")]),t._v(" "),s("p",[t._v("Run the following commands:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("go mod tidy\ngo run main.go\n")])])]),s("p",[t._v("The running result is as follows:")]),t._v(" "),s("div",{staticClass:"language-log extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br")]),s("pre",{pre:!0,attrs:{class:"language-log"}},[s("code",[s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.767")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("heaven\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cemetery\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tracer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tracer\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logrus"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logger\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("propertiesConfigure\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logrus"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("logger\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Use Env"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" local\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level warning important"}},[t._v("WARNING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties:")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build1582606196/b001/exe/config/default.properties")]),t._v(" not found"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" skipping\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level warning important"}},[t._v("WARNING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties:")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build1582606196/b001/exe/config/local.properties")]),t._v(" not found"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" skipping\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level warning important"}},[t._v("WARNING")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("properties:")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/Users/jim/works/gone-io/gone/example/use-rdb/config/local.properties")]),t._v(" not found"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" skipping\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("propertiesConfigure\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goner"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xorm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("engine\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.768")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Init"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive main"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("SqlExecutor\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.769")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/Users/jim/go/pkg/mod/xorm.io/xorm@v1.3.2/log/logger_context.go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("PING DATABASE mysql\n"),s("span",{pre:!0,attrs:{class:"token date number"}},[t._v("2024-05-10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token time number"}},[t._v("16:56:52.783")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token level info keyword"}},[t._v("INFO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token file-path string"}},[t._v("/Users/jim/works/gone-io/gone/cemetery.go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("307")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("Revive "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\ndemo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" hello gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),t._v("\ndemo records"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" hello gone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" The most Spring programmer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("friendly Golang framework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependency injection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" integrates Web"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"points-to-note"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#points-to-note"}},[t._v("#")]),t._v(" Points to Note")]),t._v(" "),s("h3",{attrs:{id:"_1-github-com-gone-io-gone-goner-is-a-wrapper-for-xorm-io-xorm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-github-com-gone-io-gone-goner-is-a-wrapper-for-xorm-io-xorm"}},[t._v("#")]),t._v(" 1. "),s("code",[t._v("github.com/gone-io/gone/goner")]),t._v(" is a wrapper for "),s("code",[t._v("xorm.io/xorm")])]),t._v(" "),s("p",[t._v("The wrapper logic is roughly as follows: "),s("code",[t._v("xorm")]),t._v(" is wrapped as an "),s("a",{attrs:{href:"https://goner.fun/en/guide/core-concept.html#%F0%9F%98%87angel-%E5%A4%A9%E4%BD%BF",target:"_blank",rel:"noopener noreferrer"}},[t._v("Angel Goner"),s("OutboundLink")],1),t._v("; data connection is established in the "),s("code",[t._v("Start")]),t._v(" method, and the database connection is closed in the "),s("code",[t._v("Stop")]),t._v(" method. When using it, there is no need to import the "),s("code",[t._v("xorm.io/xorm")]),t._v(" package directly, only "),s("code",[t._v("github.com/gone-io/gone/goner")]),t._v(" needs to be imported. The wrapper relies on "),s("code",[t._v("github.com/gone-io/gone/tree/main/goner/config")]),t._v(" to implement configuration. The burial of configuration-related Goners is automatically completed in the "),s("code",[t._v("goner.XormPriest")]),t._v(" function.\nSupported configuration items in the configuration file:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("database.driver-name")]),t._v(": Name of the driver, supports mainstream databases like MySQL, PostgreSQL, etc. For details, refer to the "),s("a",{attrs:{href:"https://xorm.io/docs/1.engine/",target:"_blank",rel:"noopener noreferrer"}},[t._v("xorm documentation"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("database.dsn")]),t._v(": Data source name, refer to the "),s("a",{attrs:{href:"https://xorm.io/docs/1.engine/",target:"_blank",rel:"noopener noreferrer"}},[t._v("xorm documentation"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("code",[t._v("database.max-idle-count")]),t._v(": Maximum number of idle connections in the connection pool")]),t._v(" "),s("li",[s("code",[t._v("database.max-open")]),t._v(": Maximum number of connections in the connection pool")]),t._v(" "),s("li",[s("code",[t._v("database.max-lifetime")]),t._v(": Maximum lifetime of a connection")]),t._v(" "),s("li",[s("code",[t._v("database.showSql")]),t._v(": Whether to print executed SQL statements")])]),t._v(" "),s("h3",{attrs:{id:"_2-injection-via-gone-xorm-gonerid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-injection-via-gone-xorm-gonerid"}},[t._v("#")]),t._v(" 2. Injection via "),s("code",[t._v("gone-xorm")]),t._v(" "),s("strong",[t._v("GonerId")])]),t._v(" "),s("p",[t._v("In the Goner where the xorm engine is needed, use the "),s("code",[t._v('gone:"gone-xorm"')]),t._v(" tag to inject "),s("code",[t._v("xorm.Engine")]),t._v(", properties can be named or anonymous:")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" XormUser "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Named")]),t._v("\n    db xorm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"gone-xorm"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Or")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" XormUser "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Anonymous")]),t._v("\n    xorm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Engine "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('`gone:"gone-xorm"`')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("xorm.Engine")]),t._v(' "inherits" the '),s("code",[t._v("xorm.io/xorm.EngineInterface")]),t._v(" interface, so "),s("code",[t._v("xorm.Engine")]),t._v(" supports all methods in the "),s("a",{attrs:{href:"https://xorm.io/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("xorm documentation"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"_3-pay-attention-to-imported-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-pay-attention-to-imported-packages"}},[t._v("#")]),t._v(" 3. Pay Attention to Imported Packages")]),t._v(" "),s("ul",[s("li",[t._v("Import the database driver, which varies for different databases:")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/go-sql-driver/mysql"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("Import the xorm package as "),s("code",[t._v("github.com/gone-io/gone/goner/xorm")]),t._v(", not "),s("code",[t._v("xorm.io/xorm")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/gone-io/gone/goner/xorm"')]),t._v(" #📢⚠️Special attention needed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" the xorm "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" wrapped by gone\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);