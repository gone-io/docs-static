<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Goner and Dependency Injection | Gone Document</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/assets/img/logo.png">
    <script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ed9e5a48d8eeb5e6b55a0de9cb8f6486";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
// if(location.pathname == '/'){
//     location.pathname='/zh/'
// }
</script>
    <meta name="description" content="Gone is a lightweight dependency injection framework based on Golang, integrating many open-source tools such as Gin, XOrm, Logrus, etc., to provide convenient web development.">
    <link rel="preload" href="/assets/css/0.styles.ef76fb7a.css" as="style"><link rel="preload" href="/assets/js/app.1bdf1963.js" as="script"><link rel="preload" href="/assets/js/2.f18e2b4c.js" as="script"><link rel="preload" href="/assets/js/1.83b28654.js" as="script"><link rel="preload" href="/assets/js/23.f7691d82.js" as="script"><link rel="prefetch" href="/assets/js/10.0ee1033c.js"><link rel="prefetch" href="/assets/js/11.1b93f309.js"><link rel="prefetch" href="/assets/js/12.dfb21252.js"><link rel="prefetch" href="/assets/js/13.ba2e5946.js"><link rel="prefetch" href="/assets/js/14.dc48dc13.js"><link rel="prefetch" href="/assets/js/15.f5494b4f.js"><link rel="prefetch" href="/assets/js/16.0eb527a0.js"><link rel="prefetch" href="/assets/js/17.b17c6981.js"><link rel="prefetch" href="/assets/js/18.1208b728.js"><link rel="prefetch" href="/assets/js/19.99982a9d.js"><link rel="prefetch" href="/assets/js/20.a0fd51dd.js"><link rel="prefetch" href="/assets/js/21.fd8de9f3.js"><link rel="prefetch" href="/assets/js/22.5fdea428.js"><link rel="prefetch" href="/assets/js/24.41c07631.js"><link rel="prefetch" href="/assets/js/25.6783b265.js"><link rel="prefetch" href="/assets/js/26.d119e561.js"><link rel="prefetch" href="/assets/js/27.f64ac172.js"><link rel="prefetch" href="/assets/js/28.4e688c90.js"><link rel="prefetch" href="/assets/js/29.21472e9e.js"><link rel="prefetch" href="/assets/js/3.c0437673.js"><link rel="prefetch" href="/assets/js/30.18eeb4fa.js"><link rel="prefetch" href="/assets/js/31.b7392ba6.js"><link rel="prefetch" href="/assets/js/32.27e6b4f4.js"><link rel="prefetch" href="/assets/js/33.b1d76de0.js"><link rel="prefetch" href="/assets/js/34.cf6f0a54.js"><link rel="prefetch" href="/assets/js/35.70505c96.js"><link rel="prefetch" href="/assets/js/36.d8aad33f.js"><link rel="prefetch" href="/assets/js/37.f0b2eb4e.js"><link rel="prefetch" href="/assets/js/38.1b8b11cd.js"><link rel="prefetch" href="/assets/js/39.feafefe4.js"><link rel="prefetch" href="/assets/js/4.29a103ea.js"><link rel="prefetch" href="/assets/js/40.114f190b.js"><link rel="prefetch" href="/assets/js/41.7a580400.js"><link rel="prefetch" href="/assets/js/42.e79ab512.js"><link rel="prefetch" href="/assets/js/43.3c915f26.js"><link rel="prefetch" href="/assets/js/44.8d040b5c.js"><link rel="prefetch" href="/assets/js/45.444a0c74.js"><link rel="prefetch" href="/assets/js/46.3cfaf2f9.js"><link rel="prefetch" href="/assets/js/47.59cb61ac.js"><link rel="prefetch" href="/assets/js/48.a1f39fab.js"><link rel="prefetch" href="/assets/js/49.71203825.js"><link rel="prefetch" href="/assets/js/5.4fad613e.js"><link rel="prefetch" href="/assets/js/50.66e7ae43.js"><link rel="prefetch" href="/assets/js/51.dee43b05.js"><link rel="prefetch" href="/assets/js/52.c0fe54f8.js"><link rel="prefetch" href="/assets/js/53.1b873ca6.js"><link rel="prefetch" href="/assets/js/54.7822f8a2.js"><link rel="prefetch" href="/assets/js/55.bf0b9b30.js"><link rel="prefetch" href="/assets/js/56.f73388e7.js"><link rel="prefetch" href="/assets/js/57.f5cb1c45.js"><link rel="prefetch" href="/assets/js/58.2dbd560d.js"><link rel="prefetch" href="/assets/js/59.8732e23d.js"><link rel="prefetch" href="/assets/js/6.43db7c1f.js"><link rel="prefetch" href="/assets/js/60.cdac8fdf.js"><link rel="prefetch" href="/assets/js/7.94af19b6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cf079a49.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ef76fb7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Gone Document" class="logo"> <span class="site-name can-hide">Gone Document</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Quick Start" class="dropdown-title"><span class="title">Quick Start</span> <span class="arrow down"></span></button> <button type="button" aria-label="Quick Start" class="mobile-dropdown-title"><span class="title">Quick Start</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/quick-start/simple.html" class="nav-link">
  Creating a Simple Web Project
</a></li><li class="dropdown-item"><!----> <a href="/quick-start/mysql.html" class="nav-link">
  Web + MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Development Guide" class="dropdown-title"><span class="title">Development Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Development Guide" class="mobile-dropdown-title"><span class="title">Development Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/core-concept.html" class="nav-link">
  Core Concepts of Gone
</a></li><li class="dropdown-item"><!----> <a href="/guide/gone-and-inject.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Goner and Dependency Injection
</a></li><li class="dropdown-item"><!----> <a href="/guide/goner-inject.html" class="nav-link">
  Injection Methods Supported by Gone
</a></li><li class="dropdown-item"><!----> <a href="/guide/inner-goner.html" class="nav-link">
  How to Gracefully Use Built-in Goners?
</a></li><li class="dropdown-item"><!----> <a href="/guide/config.html" class="nav-link">
  Configuring with Built-in Goners Support
</a></li><li class="dropdown-item"><!----> <a href="/guide/xorm.html" class="nav-link">
  Performing database operations
</a></li><li class="dropdown-item"><!----> <a href="/guide/hooks.html" class="nav-link">
  Gone's Hook Functions
</a></li><li class="dropdown-item"><!----> <a href="/guide/logrus.html" class="nav-link">
  Logging Output
</a></li><li class="dropdown-item"><!----> <a href="/guide/tracer.html" class="nav-link">
  Trace Log with traceId
</a></li><li class="dropdown-item"><!----> <a href="/guide/auto-gen-priest.html" class="nav-link">
  Auto-generate Priest
</a></li></ul></div></div><div class="nav-item"><a href="/references/" class="nav-link">
  References
</a></div><div class="nav-item"><a href="/goners/" class="nav-link">
  Goners
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/gone-and-inject.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/guide/gone-and-inject.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/gone-io/gone" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Quick Start" class="dropdown-title"><span class="title">Quick Start</span> <span class="arrow down"></span></button> <button type="button" aria-label="Quick Start" class="mobile-dropdown-title"><span class="title">Quick Start</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/quick-start/simple.html" class="nav-link">
  Creating a Simple Web Project
</a></li><li class="dropdown-item"><!----> <a href="/quick-start/mysql.html" class="nav-link">
  Web + MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Development Guide" class="dropdown-title"><span class="title">Development Guide</span> <span class="arrow down"></span></button> <button type="button" aria-label="Development Guide" class="mobile-dropdown-title"><span class="title">Development Guide</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/core-concept.html" class="nav-link">
  Core Concepts of Gone
</a></li><li class="dropdown-item"><!----> <a href="/guide/gone-and-inject.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Goner and Dependency Injection
</a></li><li class="dropdown-item"><!----> <a href="/guide/goner-inject.html" class="nav-link">
  Injection Methods Supported by Gone
</a></li><li class="dropdown-item"><!----> <a href="/guide/inner-goner.html" class="nav-link">
  How to Gracefully Use Built-in Goners?
</a></li><li class="dropdown-item"><!----> <a href="/guide/config.html" class="nav-link">
  Configuring with Built-in Goners Support
</a></li><li class="dropdown-item"><!----> <a href="/guide/xorm.html" class="nav-link">
  Performing database operations
</a></li><li class="dropdown-item"><!----> <a href="/guide/hooks.html" class="nav-link">
  Gone's Hook Functions
</a></li><li class="dropdown-item"><!----> <a href="/guide/logrus.html" class="nav-link">
  Logging Output
</a></li><li class="dropdown-item"><!----> <a href="/guide/tracer.html" class="nav-link">
  Trace Log with traceId
</a></li><li class="dropdown-item"><!----> <a href="/guide/auto-gen-priest.html" class="nav-link">
  Auto-generate Priest
</a></li></ul></div></div><div class="nav-item"><a href="/references/" class="nav-link">
  References
</a></div><div class="nav-item"><a href="/goners/" class="nav-link">
  Goners
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/gone-and-inject.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/guide/gone-and-inject.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/gone-io/gone" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Goner and Dependency Injection</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/gone-and-inject.html#goner-and-dependency-injection" class="sidebar-link">Goner and Dependency Injection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#definition-of-goner" class="sidebar-link">Definition of Goner</a></li><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#how-dependency-injection-is-achieved-in-gone" class="sidebar-link">How Dependency Injection is Achieved in Gone</a></li><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#how-to-execute-business-code-in-goners" class="sidebar-link">How to Execute Business Code in Goners?</a></li><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#the-gone-command-automatically-generating-priest-functions" class="sidebar-link">The gone Command: Automatically Generating Priest Functions</a></li></ul></li><li><a href="/guide/gone-and-inject.html#anonymous-injection-vs-named-injection" class="sidebar-link">Anonymous Injection vs Named Injection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#named-burial" class="sidebar-link">Named Burial</a></li></ul></li><li><a href="/guide/gone-and-inject.html#pointer-injection-value-injection-and-interface-injection" class="sidebar-link">Pointer Injection, Value Injection, and Interface Injection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#pointer-injection-vs-interface-injection" class="sidebar-link">Pointer Injection vs Interface Injection</a></li></ul></li><li><a href="/guide/gone-and-inject.html#slice-injection-and-map-injection" class="sidebar-link">Slice Injection and Map Injection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/gone-and-inject.html#private-property-injection" class="sidebar-link">Private Property Injection</a></li></ul></li><li><a href="/guide/gone-and-inject.html#configuration-injection" class="sidebar-link">Configuration Injection</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="goner-and-dependency-injection"><a href="#goner-and-dependency-injection" class="header-anchor">#</a> Goner and Dependency Injection</h2> <h3 id="definition-of-goner"><a href="#definition-of-goner" class="header-anchor">#</a> Definition of Goner</h3> <p>In the Gone application, all components are required to be defined as Goners (i.e., structures that &quot;inherit&quot; <code>gone.Flag</code>, although Go does not have the concept of &quot;inheritance&quot; as seen in other languages; instead, it uses anonymous embedding). If a property of a Goner is tagged with the <code>gone:&quot;&quot;</code> tag, the Gone framework will attempt to automatically wire this property. Here's an example of defining a Goner:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> example
<span class="token keyword">import</span> <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token keyword">type</span> AGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
<span class="token punctuation">}</span>
</code></pre></div><p>Injecting the above-defined AGoner into another Goner:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> example
<span class="token keyword">import</span> <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token keyword">type</span> BGoner <span class="token keyword">struct</span><span class="token punctuation">{</span>
    gone<span class="token punctuation">.</span>Flag
    A <span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// The purpose of the gone tag is to inform Gone that this property needs to be automatically injected with a value</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In this example, both the injected and the injecting structures must be <code>Goner</code> (i.e., structures embedded with <code>gone.Flag</code>). The <code>gone:&quot;*&quot;</code> tag on the <code>A</code> property of the <code>BGoner</code> tells the framework that this property needs to be injected with a value.</p> <h3 id="how-dependency-injection-is-achieved-in-gone"><a href="#how-dependency-injection-is-achieved-in-gone" class="header-anchor">#</a> How Dependency Injection is Achieved in Gone</h3> <p>In Java Spring, classes are annotated with <code>@Component</code>, <code>@Service</code>, etc., and during Spring startup, these specially annotated classes are automatically scanned, instantiated, and their annotated properties injected with corresponding values.</p> <p>The reason Spring can achieve this functionality lies in a critical feature of Java: after Java code is compiled into a JAR file, all class bytecode is preserved, even for classes not directly dependent on the <code>main</code> function. However, in Go, the compiled code is pruned, and only the code relevant to the <code>main</code> function is retained in the binary. Therefore, if we merely define Goners, we'll find that our Goner code has been pruned.</p> <p>How do we prevent our Goners from being pruned? The answer is simple: explicitly add all Goners to a &quot;repository&quot;. In Gone, this repository is called the <code>Cemetery</code>. <code>Goner</code> means &quot;deceased&quot;, and <code>Cemetery</code> is the graveyard used to bury (Bury) Goners. We can instantiate all Goners and add them to the Cemetery at program startup:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">&quot;example&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
        cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>example<span class="token punctuation">.</span>AGoner<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
		cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>example<span class="token punctuation">.</span>BGoner<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the above code, we see that <code>gone.Run</code> can accept a function in the form of <strong><code>func (cemetery gone.Cemetery) error</code></strong>. In practice, this function, which we call <strong>Priest</strong>, is responsible for burying Goners in the cemetery.</p> <h3 id="how-to-execute-business-code-in-goners"><a href="#how-to-execute-business-code-in-goners" class="header-anchor">#</a> How to Execute Business Code in Goners?</h3> <p>In Gone, we've made an interesting definition: when all properties of a Goner are injected, we say that this Goner has been resurrected (Revive). If you look at the source code of Gone, you'll find that the component responsible for managing the revived Goner status is called <strong>Heaven</strong>, inspired by the mythical belief across religions that people ascend to heaven after death.</p> <p>To execute business code in Goners, we can define a method on Goners called <strong><code>AfterRevive() gone.AfterReviveError</code></strong>. This method is executed after a Goner is <strong>Revived</strong>, and Goners possessing this method are called <strong>Prophets</strong>. In practice, we typically only need to define a small number of prophets to guide code execution.</p> <p>Here's an example; you can find the code <a href="https://github.com/gone-io/gone/blob/main/example/after-revive/main.go" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token keyword">type</span> Adder <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>Adder<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a1 <span class="token operator">+</span> a2
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
	adder Adder <span class="token string">`gone:&quot;*&quot;`</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">Compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;I want to compute!&quot;</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1000 add 2000 is&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>adder<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// AfterRevive is a function executed after revival.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">AfterRevive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gone<span class="token punctuation">.</span>AfterReviveError <span class="token punctuation">{</span>
	<span class="token comment">// boot</span>
	c<span class="token punctuation">.</span><span class="token function">Compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
		cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Computer<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
		cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Adder<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Executing the above code will yield the following result:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Revive github.com/gone-io/gone/heaven
Revive github.com/gone-io/gone/cemetery
Revive main/Computer
Revive main/Adder
I want to compute<span class="token operator">!</span>
<span class="token number">1000</span> <span class="token function">add</span> <span class="token number">2000</span> is <span class="token number">3000</span>
</code></pre></div><h3 id="the-gone-command-automatically-generating-priest-functions"><a href="#the-gone-command-automatically-generating-priest-functions" class="header-anchor">#</a> The gone Command: Automatically Generating <code>Priest</code> Functions</h3> <p>In fact, we've already covered the core functionality of the Gone framework. However, due to limitations in Golang itself, we can't achieve the same level of convenience as Spring, where all <strong><code>Goners</code></strong> need to be manually <strong>buried</strong> (**<code>Bury</code>**ed) into the <strong><code>Cemetery</code></strong>. To make Gone easier to use, we've developed a utility tool to automatically generate <strong><code>Priest</code></strong> functions. Below, we'll explain how to use this utility tool in a project.</p> <blockquote><p>You can find the complete code <a href="https://github.com/gone-io/gone/blob/main/example/gen-code" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h4 id="_1-install-the-utility-tool-gone"><a href="#_1-install-the-utility-tool-gone" class="header-anchor">#</a> 1. Install the Utility Tool: gone</h4> <p>The utility tool, also named gone, can be installed using <code>go install</code> as follows:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go <span class="token function">install</span> github.com/gone-io/gone/tools/gone@latest
</code></pre></div><p>For more information on using the gone command, please refer to the <a href="https://goner.fun/references/gone-tool.html" target="_blank" rel="noopener noreferrer">gone utility tool documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="_2-create-a-new-project-named-gen-code"><a href="#_2-create-a-new-project-named-gen-code" class="header-anchor">#</a> 2. Create a New Project Named <code>gen-code</code></h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> gen-code
<span class="token builtin class-name">cd</span> gen-code
go mod init gen-code
</code></pre></div><h4 id="_3-create-goners"><a href="#_3-create-goners" class="header-anchor">#</a> 3. Create Goners</h4> <p>File: goner.go</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token comment">//go:gone</span>
<span class="token keyword">func</span> <span class="token function">NewAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gone<span class="token punctuation">.</span>Goner <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Adder<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//go:gone</span>
<span class="token keyword">func</span> <span class="token function">NewComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gone<span class="token punctuation">.</span>Goner <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Computer<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Adder <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>Adder<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a1 <span class="token operator">+</span> a2
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
	adder Adder <span class="token string">`gone:&quot;*&quot;`</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">Compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;I want to compute!&quot;</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1000 add 2000 is&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">.</span>adder<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// AfterRevive is a function executed after revival.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Computer<span class="token punctuation">)</span> <span class="token function">AfterRevive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gone<span class="token punctuation">.</span>AfterReviveError <span class="token punctuation">{</span>
	<span class="token comment">// boot</span>
	c<span class="token punctuation">.</span><span class="token function">Compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the code above, please note that we've added two factory functions <code>NewAdder() gone.Goner</code> and <code>func NewComputer() gone.Goner</code>, and we've put a special comment before the functions:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">//go:gone</span>
</code></pre></div><p>Please do not remove this comment, as it tells the utility tool how to generate the code.</p> <h4 id="_4-use-the-utility-tool"><a href="#_4-use-the-utility-tool" class="header-anchor">#</a> 4. Use the Utility Tool</h4> <p>Please execute the following command in the <code>gen-code</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>gone priest <span class="token parameter variable">-s</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-p</span> main <span class="token parameter variable">-f</span> Priest <span class="token parameter variable">-o</span> priest.go
</code></pre></div><p>This command scans the current directory and generates a <strong>priest</strong> function with the function name <code>Priest</code>, in the package named <code>main</code>, and puts the code in a file named <code>priest.go</code>.
After executing the command, a file named <code>priest.go</code> will be generated in the current directory with the following content:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Code generated by gone; DO NOT EDIT.</span>
<span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">Priest</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token function">NewAdder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token function">NewComputer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-add-a-main-function"><a href="#_5-add-a-main-function" class="header-anchor">#</a> 5. Add a <code>main</code> Function</h4> <p>File: main.go</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>Priest<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now, we've completed the entire small Gone program. Its file structure is as follows:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">.</span>
├── go.mod
├── go.sum
├── goner.go   <span class="token comment"># Definition of goners</span>
├── main.go
└── priest.go  <span class="token comment"># Generated code</span>
</code></pre></div><p>You can run the program using the command <code>go run .</code>, and the program will output the following:</p> <div class="language-code extra-class"><pre class="language-text"><code>Revive github.com/gone-io/gone/heaven
Revive github.com/gone-io/gone/cemetery
Revive main/Adder
Revive main/Computer
I want to compute!
1000 add 2000 is 3000
</code></pre></div><h2 id="anonymous-injection-vs-named-injection"><a href="#anonymous-injection-vs-named-injection" class="header-anchor">#</a> Anonymous Injection vs Named Injection</h2> <p>In the preceding sections, all of our examples have demonstrated anonymous injection by type. When injecting anonymously, if there are multiple <strong><code>Goners</code></strong> of the same type, only one will be injected, typically the first one that was revived. Gone also supports named injection, or <strong>named burial</strong>.</p> <p>Firstly, let's take a look at the complete definition of the <strong><code>Cemetery.Bury</code></strong> function: <strong><code>Bury(Goner, ...GonerId) Cemetery</code></strong>. This definition serves two purposes:</p> <ol><li>It supports named burial, where the second parameter is optional, allowing you to pass a string as the <strong>ID</strong> (<strong>GonerId</strong>) of the <strong>Goner</strong>.</li> <li>It supports chaining of the Bury function.</li></ol> <h3 id="named-burial"><a href="#named-burial" class="header-anchor">#</a> Named Burial</h3> <p>To achieve named burial, our code can be written like this:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Priest Responsible for putting Goners that need to be used into the framework</span>
<span class="token keyword">func</span> <span class="token function">Priest</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	cemetery<span class="token punctuation">.</span>
		<span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Injected Goner1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;A1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token comment">// Burial of the first AGoner, ID=A1</span>
		<span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Injected Goner2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;A2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span> <span class="token comment">// Burial of the second AGoner, ID=A2</span>
		<span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>BGoner<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively, you can decouple the construction of Goners from their burial like this:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// NewA1 constructs A1 AGoner</span>
<span class="token keyword">func</span> <span class="token function">NewA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>gone<span class="token punctuation">.</span>Goner<span class="token punctuation">,</span> gone<span class="token punctuation">.</span>GonerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Injected Goner1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;A1&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// NewA2 constructs A2 AGoner</span>
<span class="token keyword">func</span> <span class="token function">NewA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>gone<span class="token punctuation">.</span>Goner<span class="token punctuation">,</span> gone<span class="token punctuation">.</span>GonerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Injected Goner2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;A2&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Priest Responsible for putting Goners that need to be used into the framework</span>
<span class="token keyword">func</span> <span class="token function">Priest</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	cemetery<span class="token punctuation">.</span>
		<span class="token function">Bury</span><span class="token punctuation">(</span><span class="token function">NewA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Bury</span><span class="token punctuation">(</span><span class="token function">NewA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>BGoner<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Next is the named injection within structs, which can be better understood with an example:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> BGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag         <span class="token comment">// Tell the framework that this struct is a Goner</span>
	a         <span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Anonymous injection of an AGoner</span>
	a1        <span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;A1&quot;`</span> <span class="token comment">// Named injection of A1</span>
	a2        <span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;A2&quot;`</span> <span class="token comment">// Named injection of A2</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note: In the code above, the tag after the struct field:</p> <ul><li><code>gone:&quot;*&quot;</code> denotes anonymous injection.</li> <li><code>gone:&quot;A1&quot;</code> denotes injection with the ID <code>A1</code>.</li></ul> <p>In Go, whether anonymous or named, the <strong>Goner</strong> to be injected must be type-compatible; otherwise, the injection will fail.</p> <h2 id="pointer-injection-value-injection-and-interface-injection"><a href="#pointer-injection-value-injection-and-interface-injection" class="header-anchor">#</a> Pointer Injection, Value Injection, and Interface Injection</h2> <p>If the property of the injected struct is a pointer, then the injection is called <strong>pointer injection</strong>. The definitions for <strong>value injection</strong> and <strong>interface injection</strong> are similar. Let's take an example:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> AGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag <span class="token comment">// Tell the framework that this struct is a Goner</span>
	Name      <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>g <span class="token operator">*</span>AGoner<span class="token punctuation">)</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;I am the AGoner, My name is&quot;</span><span class="token punctuation">,</span> g<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Speaker <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> BGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag         <span class="token comment">// Tell the framework that this struct is a Goner</span>
	a0         <span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span>  <span class="token comment">// Anonymous injection of an AGoner; pointer injection</span>
	a1        <span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;A1&quot;`</span> <span class="token comment">// Named injection of A1; pointer injection</span>
	a2 AGoner  <span class="token string">`gone:&quot;A1&quot;`</span> <span class="token comment">// Value injection</span>
	a3 Speaker <span class="token string">`gone:&quot;A2&quot;`</span> <span class="token comment">// Interface injection</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the code above, <code>BGoner.a0</code> and <code>BGoner.a1</code> are subjected to <strong>pointer injection</strong>. <code>BGoner.a2</code> is subjected to <strong>value injection</strong>, while <code>BGoner.a3</code> is subjected to <strong>interface injection</strong>.</p> <p><strong>A special note:</strong> In Go, &quot;assigning or passing a value type involves making a copy.&quot; This means that when using <strong>value injection</strong>, a new &quot;object&quot; is actually created, and the new and old objects are only equal at the moment of transfer. They are independent in memory. This can lead to some unexpected results. For example:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> BGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
	a1 AGoner  <span class="token string">`gone:&quot;A1&quot;`</span> <span class="token comment">// Value injection</span>
	a2 AGoner  <span class="token string">`gone:&quot;A1&quot;`</span> <span class="token comment">// Value injection</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>g <span class="token operator">*</span>BGoner<span class="token punctuation">)</span> <span class="token function">AfterRevive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gone<span class="token punctuation">.</span>AfterReviveError <span class="token punctuation">{</span>
	g<span class="token punctuation">.</span>a1<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;dapeng&quot;</span>
	g<span class="token punctuation">.</span>a2<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;wang&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;a1 is eq a2: %v&quot;</span><span class="token punctuation">,</span> g<span class="token punctuation">.</span>a1 <span class="token operator">==</span> g<span class="token punctuation">.</span>a2<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the code above, <code>BGoner.a1</code> and <code>BGoner.a2</code> are both injected with the same Goner (<code>A1</code>). However, since it's <strong>value injection</strong>, during the injection process, the framework can only copy the value of <code>A1</code> Goner to <code>BGoner.a1</code> and <code>BGoner.a2</code>. After injection, <code>BGoner.a1</code> and <code>BGoner.a2</code> have no connection with <code>A1</code>, and there's no connection between <code>BGoner.a1</code> and <code>BGoner.a2</code>. There will also be three separate spaces in memory occupied by <code>AGoner</code> type. The result of <code>fmt.Printf(&quot;a1 is eq a2: %v&quot;, g.a1 == g.a2)</code> will be <code>false</code>.</p> <blockquote><p>Considering that <strong>Gone</strong> is primarily intended as a foundational framework, we have retained the <strong>value injection</strong> feature. However, in most cases, we recommend using <strong>pointer injection</strong> and <strong>interface injection</strong>.</p></blockquote> <h3 id="pointer-injection-vs-interface-injection"><a href="#pointer-injection-vs-interface-injection" class="header-anchor">#</a> Pointer Injection vs Interface Injection</h3> <p>During the Bury process of <strong>Goner</strong>, it's required to pass a reference. This means that the first parameter of the <code>Cemetery.Bury</code> method must be of a reference type. Both pointer injection and interface injection can pass the reference of <strong>Bury</strong> to the properties of a struct. <strong>Pointer injection</strong> is straightforward and intuitive, with a one-to-one correspondence between types, requiring little explanation.</p> <p>Interfaces are one of the most essential designs in Go. Their purpose is to decouple the business usage from the implementation logic, allowing users of the interface to not be concerned with the implementation details. Another purpose of interfaces is to break circular dependencies. If two modules have a circular reference and they are in different packages, it violates the rule of no circular dependencies in Go, leading to compilation failure. We can use interfaces to break this circular dependency.</p> <p>Circular dependency:
<img src="data:image/png;base64,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" alt="Circular dependency"></p> <p>Using interfaces to break circular dependency:
<img src="/assets/img/image7.ca08b1e7.png" alt="Using interfaces to break circular dependency"></p> <p>Using interfaces can hide the implementation details of business logic, effectively reducing the coupling between modules and better adhering to the &quot;open-closed&quot; principle. Therefore, we recommend using <strong>interface injection</strong>. However, there are no absolutes in everything, introducing interfaces will certainly increase additional costs, so we still support <strong>pointer injection</strong>.</p> <h2 id="slice-injection-and-map-injection"><a href="#slice-injection-and-map-injection" class="header-anchor">#</a> Slice Injection and Map Injection</h2> <p>Gone supports injection into <code>Slice</code> and <code>Map</code>, meaning it supports the following syntax:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> BGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    gone<span class="token punctuation">.</span>Flag
    aSlice1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a slice of Goner pointers</span>
    aSlice2 <span class="token punctuation">[</span><span class="token punctuation">]</span>AGoner  <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a slice of Goner values</span>
    aMap1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a map of Goner pointers</span>
    aMap2 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>AGoner  <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a map of Goner values</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>The rules for injection are as follows:</strong></p> <ul><li><ol><li>The element type of Slice and Map can be Goner pointer type or Goner value type, or an interface.</li></ol></li> <li><ol start="2"><li>Gone will inject all types compatible with Goner into Slice and Map.</li></ol></li> <li><ol start="3"><li>The type of Map key can only be string.</li></ol></li> <li><ol start="4"><li>The value of Map key is the GonerId of the injected Goner. If no GonerId is specified when burying an anonymous Goner, Gone will generate one automatically.</li></ol></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Using values as the element types for Slice and Map is not recommended.</p></div> <p>Here's a complete example:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;github.com/gone-io/gone&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">type</span> AGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    gone<span class="token punctuation">.</span>Flag <span class="token comment">// Tell the framework that this struct is a Goner</span>
    Name      <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>g <span class="token operator">*</span>AGoner<span class="token punctuation">)</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;I am the AGoner, My name is: %s&quot;</span><span class="token punctuation">,</span> g<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> BGoner <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    gone<span class="token punctuation">.</span>Flag
    aSlice1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a slice of Goner pointers</span>
    aSlice2 <span class="token punctuation">[</span><span class="token punctuation">]</span>AGoner  <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a slice of Goner values</span>
    aMap1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">*</span>AGoner <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a map of Goner pointers</span>
    aMap2 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>AGoner  <span class="token string">`gone:&quot;*&quot;`</span> <span class="token comment">// Injected property is a map of Goner values</span>
<span class="token punctuation">}</span>
<span class="token comment">// AfterRevive executed After the Goner is revived; After `gone.Run`, gone framework detects the AfterRevive function on goners and runs it.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>g <span class="token operator">*</span>BGoner<span class="token punctuation">)</span> <span class="token function">AfterRevive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gone<span class="token punctuation">.</span>AfterReviveError <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> a <span class="token operator">:=</span> <span class="token keyword">range</span> g<span class="token punctuation">.</span>aSlice1 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;aSlice1:%s\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> a <span class="token operator">:=</span> <span class="token keyword">range</span> g<span class="token punctuation">.</span>aSlice2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;aSlice2:%s\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> a <span class="token operator">:=</span> <span class="token keyword">range</span> g<span class="token punctuation">.</span>aMap1 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;aMap1[%s]:%s\n&quot;</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> a <span class="token operator">:=</span> <span class="token keyword">range</span> g<span class="token punctuation">.</span>aMap2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;aMap2[%s]:%s\n&quot;</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
<span class="token comment">// NewA1 creates A1 AGoner</span>
<span class="token keyword">func</span> <span class="token function">NewA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>gone<span class="token punctuation">.</span>Goner<span class="token punctuation">,</span> gone<span class="token punctuation">.</span>GonerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Injected Goner1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;A1&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// NewA2 creates A2 AGoner</span>
<span class="token keyword">func</span> <span class="token function">NewA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>gone<span class="token punctuation">.</span>Goner<span class="token punctuation">,</span> gone<span class="token punctuation">.</span>GonerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Injected Goner2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;A2&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gone<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
        cemetery<span class="token punctuation">.</span>
            <span class="token function">Bury</span><span class="token punctuation">(</span><span class="token function">NewA1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
            <span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>AGoner<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Anonymous&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
            <span class="token function">Bury</span><span class="token punctuation">(</span><span class="token function">NewA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
            <span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>BGoner<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">nil</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The example yields the following result upon execution:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Revive github.com/gone-io/gone/heaven
Revive github.com/gone-io/gone/cemetery
Revive main/AGoner
Revive main/AGoner
Revive main/AGoner
Revive main/BGoner
aSlice1:I am the AGoner, My name is: Injected Goner1
aSlice1:I am the AGoner, My name is: Anonymous
aSlice1:I am the AGoner, My name is: Injected Goner2
aSlice2:I am the AGoner, My name is: Injected Goner1
aSlice2:I am the AGoner, My name is: Anonymous
aSlice2:I am the AGoner, My name is: Injected Goner2
aMap1<span class="token punctuation">[</span>A1<span class="token punctuation">]</span>:I am the AGoner, My name is: Injected Goner1
aMap1<span class="token punctuation">[</span>main/AGoner<span class="token comment">#1374393662624]:I am the AGoner, My name is: Anonymous</span>
aMap1<span class="token punctuation">[</span>A2<span class="token punctuation">]</span>:I am the AGoner, My name is: Injected Goner2
aMap2<span class="token punctuation">[</span>A2<span class="token punctuation">]</span>:I am the AGoner, My name is: Injected Goner2
aMap2<span class="token punctuation">[</span>A1<span class="token punctuation">]</span>:I am the AGoner, My name is: Injected Goner1
aMap2<span class="token punctuation">[</span>main/AGoner<span class="token comment">#1374393662624]:I am the AGoner, My name is: Anonymous</span>
</code></pre></div><h3 id="private-property-injection"><a href="#private-property-injection" class="header-anchor">#</a> Private Property Injection</h3> <p>Following the &quot;Open-Closed Principle,&quot; attributes that modules depend on should ideally be private. Gone supports injecting into private variables of a struct.</p> <h2 id="configuration-injection"><a href="#configuration-injection" class="header-anchor">#</a> <a href="/guide/guide/config.html">Configuration Injection</a></h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/core-concept.html" class="prev">
        Core Concepts of Gone
      </a></span> <span class="next"><a href="/guide/goner-inject.html">
        Injection Methods Supported by Gone
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1bdf1963.js" defer></script><script src="/assets/js/2.f18e2b4c.js" defer></script><script src="/assets/js/1.83b28654.js" defer></script><script src="/assets/js/23.f7691d82.js" defer></script>
  </body>
</html>
