<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é€šè¿‡å†…ç½®Gonersæ”¯æŒæ•°æ®åº“æ“ä½œ | Gone æ–‡æ¡£</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/assets/img/logo.png">
    <meta name="description" content="åšä¸€ä¸ªå¯¹Springç¨‹åºå‘˜æœ€å‹å¥½çš„Golangæ¡†æ¶">
    <link rel="preload" href="/assets/css/0.styles.ef76fb7a.css" as="style"><link rel="preload" href="/assets/js/app.cc389081.js" as="script"><link rel="preload" href="/assets/js/2.ee202d8a.js" as="script"><link rel="preload" href="/assets/js/1.c48f06f0.js" as="script"><link rel="preload" href="/assets/js/37.0fe90fb0.js" as="script"><link rel="prefetch" href="/assets/js/10.6d6b4918.js"><link rel="prefetch" href="/assets/js/11.d0c1cff5.js"><link rel="prefetch" href="/assets/js/12.06b4dcac.js"><link rel="prefetch" href="/assets/js/13.097715df.js"><link rel="prefetch" href="/assets/js/14.7af5b523.js"><link rel="prefetch" href="/assets/js/15.382aeb06.js"><link rel="prefetch" href="/assets/js/16.561233d3.js"><link rel="prefetch" href="/assets/js/17.502e827b.js"><link rel="prefetch" href="/assets/js/18.7a45a425.js"><link rel="prefetch" href="/assets/js/19.48c2a444.js"><link rel="prefetch" href="/assets/js/20.cbafdf24.js"><link rel="prefetch" href="/assets/js/21.e2702513.js"><link rel="prefetch" href="/assets/js/22.afcc8afe.js"><link rel="prefetch" href="/assets/js/23.d0cd3157.js"><link rel="prefetch" href="/assets/js/24.255fb18d.js"><link rel="prefetch" href="/assets/js/25.edb164c5.js"><link rel="prefetch" href="/assets/js/26.f4e3b8e5.js"><link rel="prefetch" href="/assets/js/27.0a4164a2.js"><link rel="prefetch" href="/assets/js/28.5465a544.js"><link rel="prefetch" href="/assets/js/29.9890dde8.js"><link rel="prefetch" href="/assets/js/3.764f8c95.js"><link rel="prefetch" href="/assets/js/30.e9822c70.js"><link rel="prefetch" href="/assets/js/31.40be2ed7.js"><link rel="prefetch" href="/assets/js/32.aabb414e.js"><link rel="prefetch" href="/assets/js/33.980701b9.js"><link rel="prefetch" href="/assets/js/34.a4b4af6c.js"><link rel="prefetch" href="/assets/js/35.333887e9.js"><link rel="prefetch" href="/assets/js/36.d76ecf86.js"><link rel="prefetch" href="/assets/js/38.5e8aedc9.js"><link rel="prefetch" href="/assets/js/39.31c59da2.js"><link rel="prefetch" href="/assets/js/4.80efa019.js"><link rel="prefetch" href="/assets/js/40.ff97290a.js"><link rel="prefetch" href="/assets/js/5.c0d7f84d.js"><link rel="prefetch" href="/assets/js/6.55856494.js"><link rel="prefetch" href="/assets/js/7.c8087d7b.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e758b7f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ef76fb7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Gone æ–‡æ¡£" class="logo"> <span class="site-name can-hide">Gone æ–‡æ¡£</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/" class="nav-link">
  ä»‹ç»
</a></div><div class="nav-item"><a href="/zh/quick-start/" class="nav-link">
  å¿«é€Ÿå¼€å§‹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘æŒ‡å—" class="dropdown-title"><span class="title">å¼€å‘æŒ‡å—</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¼€å‘æŒ‡å—" class="mobile-dropdown-title"><span class="title">å¼€å‘æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/core-concept.html" class="nav-link">
  æ ¸å¿ƒæ¦‚å¿µ
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/goner-inject.html" class="nav-link">
  æ”¯æŒå“ªäº›æ–¹å¼æ³¨å…¥ï¼Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/innner-goner.html" class="nav-link">
  ä¼˜é›…ä½¿ç”¨å†…ç½®Goners
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/config.html" class="nav-link">
  æ”¯æŒé…ç½®æ–‡ä»¶
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/xorm.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  æ“ä½œæ•°æ®åº“
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/hooks.html" class="nav-link">
  Hookå‡½æ•°
</a></li></ul></div></div><div class="nav-item"><a href="/zh/goners/" class="nav-link">
  Goners
</a></div> <a href="https://github.com/gone-io/gone" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/" class="nav-link">
  ä»‹ç»
</a></div><div class="nav-item"><a href="/zh/quick-start/" class="nav-link">
  å¿«é€Ÿå¼€å§‹
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¼€å‘æŒ‡å—" class="dropdown-title"><span class="title">å¼€å‘æŒ‡å—</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¼€å‘æŒ‡å—" class="mobile-dropdown-title"><span class="title">å¼€å‘æŒ‡å—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/guide/core-concept.html" class="nav-link">
  æ ¸å¿ƒæ¦‚å¿µ
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/goner-inject.html" class="nav-link">
  æ”¯æŒå“ªäº›æ–¹å¼æ³¨å…¥ï¼Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/innner-goner.html" class="nav-link">
  ä¼˜é›…ä½¿ç”¨å†…ç½®Goners
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/config.html" class="nav-link">
  æ”¯æŒé…ç½®æ–‡ä»¶
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/xorm.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  æ“ä½œæ•°æ®åº“
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/hooks.html" class="nav-link">
  Hookå‡½æ•°
</a></li></ul></div></div><div class="nav-item"><a href="/zh/goners/" class="nav-link">
  Goners
</a></div> <a href="https://github.com/gone-io/gone" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>é€šè¿‡å†…ç½®Gonersæ”¯æŒæ•°æ®åº“æ“ä½œ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/guide/xorm.html#ä»¥mysqlä¸¾ä¸ªä¾‹å­-æºä»£ç åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°" class="sidebar-link">ä»¥Mysqlä¸¾ä¸ªä¾‹å­ï¼Œæºä»£ç åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_1-å‡†å¤‡mysqlæœåŠ¡-å¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªmysqlæœåŠ¡" class="sidebar-link">1.å‡†å¤‡mysqlæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªMysqlæœåŠ¡</a></li><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_2-åˆ›å»ºmodå’Œé…ç½®" class="sidebar-link">2. åˆ›å»ºmodå’Œé…ç½®</a></li><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_3-ç¼–å†™ä»£ç å¦‚ä¸‹" class="sidebar-link">3. ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</a></li><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_3-è¿è¡Œä»£ç " class="sidebar-link">3. è¿è¡Œä»£ç </a></li></ul></li><li><a href="/zh/guide/xorm.html#éœ€è¦æ³¨æ„çš„ç‚¹" class="sidebar-link">éœ€è¦æ³¨æ„çš„ç‚¹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_1-github-com-gone-io-gone-goner-æ˜¯å¯¹-xorm-io-xorm-çš„å°è£…" class="sidebar-link">1. github.com/gone-io/gone/goner æ˜¯å¯¹ xorm.io/xorm çš„å°è£…</a></li><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_2-é€šè¿‡gone-xormgoneridæ³¨å…¥" class="sidebar-link">2. é€šè¿‡gone-xormGonerIdæ³¨å…¥</a></li><li class="sidebar-sub-header"><a href="/zh/guide/xorm.html#_3-æ³¨æ„å¯¼å…¥çš„åŒ…" class="sidebar-link">3. æ³¨æ„å¯¼å…¥çš„åŒ…</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="é€šè¿‡å†…ç½®gonersæ”¯æŒæ•°æ®åº“æ“ä½œ"><a href="#é€šè¿‡å†…ç½®gonersæ”¯æŒæ•°æ®åº“æ“ä½œ" class="header-anchor">#</a> é€šè¿‡å†…ç½®Gonersæ”¯æŒæ•°æ®åº“æ“ä½œ</h1> <p></p><div class="table-of-contents"><ul><li><a href="#ä»¥mysqlä¸¾ä¸ªä¾‹å­-æºä»£ç åœ¨-è¿™é‡Œ-https-github-com-gone-io-gone-tree-main-example-use-rdb-å¯ä»¥æ‰¾åˆ°">ä»¥Mysqlä¸¾ä¸ªä¾‹å­ï¼Œæºä»£ç åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°</a><ul><li><a href="#_1-å‡†å¤‡mysqlæœåŠ¡-å¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªmysqlæœåŠ¡">1.å‡†å¤‡mysqlæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªMysqlæœåŠ¡</a></li><li><a href="#_2-åˆ›å»ºmodå’Œé…ç½®">2. åˆ›å»ºmodå’Œé…ç½®</a></li><li><a href="#_3-ç¼–å†™ä»£ç å¦‚ä¸‹">3. ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</a></li><li><a href="#_3-è¿è¡Œä»£ç ">3. è¿è¡Œä»£ç </a></li></ul></li><li><a href="#éœ€è¦æ³¨æ„çš„ç‚¹">éœ€è¦æ³¨æ„çš„ç‚¹</a><ul><li><a href="#_1-github-com-gone-io-gone-goner-æ˜¯å¯¹-xorm-io-xorm-çš„å°è£…">1. github.com/gone-io/gone/goner æ˜¯å¯¹ xorm.io/xorm çš„å°è£…</a></li><li><a href="#_2-é€šè¿‡-gone-xorm-gonerid-æ³¨å…¥">2. é€šè¿‡gone-xormGonerIdæ³¨å…¥</a></li><li><a href="#_3-æ³¨æ„å¯¼å…¥çš„åŒ…">3. æ³¨æ„å¯¼å…¥çš„åŒ…</a></li></ul></li></ul></div><p></p> <h2 id="ä»¥mysqlä¸¾ä¸ªä¾‹å­-æºä»£ç åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°"><a href="#ä»¥mysqlä¸¾ä¸ªä¾‹å­-æºä»£ç åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°" class="header-anchor">#</a> ä»¥Mysqlä¸¾ä¸ªä¾‹å­ï¼Œæºä»£ç åœ¨<a href="https://github.com/gone-io/gone/tree/main/example/use-rdb" target="_blank" rel="noopener noreferrer">è¿™é‡Œ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å¯ä»¥æ‰¾åˆ°</h2> <h3 id="_1-å‡†å¤‡mysqlæœåŠ¡-å¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªmysqlæœåŠ¡"><a href="#_1-å‡†å¤‡mysqlæœåŠ¡-å¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªmysqlæœåŠ¡" class="header-anchor">#</a> 1.å‡†å¤‡mysqlæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨docker-composeå¿«é€Ÿå¯åŠ¨ä¸€ä¸ªMysqlæœåŠ¡</h3> <p>docker-compose.yaml å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.5&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8.3</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token number">123456</span>
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> demo
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./data/mysql<span class="token punctuation">:</span>/var/lib/mysql
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;3306:3306&quot;</span>
</code></pre></div><p>å‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢ä»£ç ï¼Œå¯åŠ¨mysqlæœåŠ¡ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> docker-compose.yaml up <span class="token parameter variable">-d</span>
</code></pre></div><h3 id="_2-åˆ›å»ºmodå’Œé…ç½®"><a href="#_2-åˆ›å»ºmodå’Œé…ç½®" class="header-anchor">#</a> 2. åˆ›å»ºmodå’Œé…ç½®</h3> <p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> use-rdb
<span class="token builtin class-name">cd</span> use-rdb
<span class="token comment"># åˆ›å»ºmod</span>
go mod init use-rdb
<span class="token comment"># åˆ›å»ºæ•°æ®åº“é…ç½®</span>
<span class="token function">mkdir</span> config
<span class="token function">cat</span> <span class="token operator">&gt;&gt;</span> config/default.properties<span class="token operator">&lt;&lt;</span><span class="token string">eof
# é…ç½®ä½¿ç”¨mysqlæ•°æ®åº“
database.driver-name=mysql
#æ•°æ®æº
database.dsn=root:123456@tcp(localhost:3306)/demo?charset=utf8mb4&amp;loc=Local
eof</span>
</code></pre></div><h3 id="_3-ç¼–å†™ä»£ç å¦‚ä¸‹"><a href="#_3-ç¼–å†™ä»£ç å¦‚ä¸‹" class="header-anchor">#</a> 3. ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</h3> <p>æ–‡ä»¶åï¼šmain.go</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token boolean">_</span> <span class="token string">&quot;github.com/go-sql-driver/mysql&quot;</span> #ğŸ“¢âš ï¸éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œéœ€è¦å¼•å…¥mysqlçš„é©±åŠ¨
	<span class="token string">&quot;github.com/gone-io/gone&quot;</span>
	<span class="token string">&quot;github.com/gone-io/gone/goner&quot;</span>
	<span class="token string">&quot;github.com/gone-io/gone/goner/xorm&quot;</span> #ğŸ“¢âš ï¸éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯¼å…¥çš„æ˜¯goneå°è£…çš„xormåŒ…
<span class="token punctuation">)</span>
<span class="token keyword">type</span> Demo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Id   <span class="token builtin">int64</span>
	Data <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> SqlExecutor <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>Flag
	db xorm<span class="token punctuation">.</span>Engine <span class="token string">`gone:&quot;gone-xorm&quot;`</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>SqlExecutor<span class="token punctuation">)</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åŒæ­¥è¡¨ç»“æ„</span>
	err <span class="token operator">:=</span> e<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Sync</span><span class="token punctuation">(</span><span class="token function">new</span><span class="token punctuation">(</span>Demo<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	demo <span class="token operator">:=</span> Demo<span class="token punctuation">{</span>Data<span class="token punctuation">:</span> <span class="token string">&quot;hello gone&quot;</span><span class="token punctuation">}</span>
    <span class="token comment">// æ’å…¥æ•°æ®</span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> e<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>
        <span class="token operator">&amp;</span>demo<span class="token punctuation">,</span> 
        Demo<span class="token punctuation">{</span>Data<span class="token punctuation">:</span> <span class="token string">&quot;The most Spring programmer-friendly Golang framework, dependency injection, integrates Web. &quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;demo: %v\n&quot;</span><span class="token punctuation">,</span> demo<span class="token punctuation">)</span>
	<span class="token keyword">var</span> list <span class="token punctuation">[</span><span class="token punctuation">]</span>Demo
    <span class="token comment">// è¯»å–æ•°æ®</span>
	err <span class="token operator">=</span> e<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>list<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token function">println</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;demo records:%v\n&quot;</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	gone<span class="token punctuation">.</span>
		<span class="token function">Prepare</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>cemetery gone<span class="token punctuation">.</span>Cemetery<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
			<span class="token comment">// é€šè¿‡ goner.XormPriest å°†xormç›¸å…³çš„GoneråŸ‹è‘¬åˆ° cemetery</span>
            <span class="token boolean">_</span> <span class="token operator">=</span> goner<span class="token punctuation">.</span><span class="token function">XormPriest</span><span class="token punctuation">(</span>cemetery<span class="token punctuation">)</span>
			cemetery<span class="token punctuation">.</span><span class="token function">Bury</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>SqlExecutor<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token boolean">nil</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
        <span class="token comment">// åœ¨Goneå¯åŠ¨å®Œæˆåæ‰§è¡Œ</span>
		<span class="token function">AfterStart</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>in <span class="token keyword">struct</span> <span class="token punctuation">{</span>
			e SqlExecutor <span class="token string">`gone:&quot;*&quot;`</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			in<span class="token punctuation">.</span>e<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
		<span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-è¿è¡Œä»£ç "><a href="#_3-è¿è¡Œä»£ç " class="header-anchor">#</a> 3. è¿è¡Œä»£ç </h3> <p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>go mod tidy
go run main.go
</code></pre></div><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-log extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><br></div><pre class="language-log"><code><span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.767</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>heaven
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>cemetery
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>tracer<span class="token operator">/</span>tracer
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>logrus<span class="token operator">/</span>logger
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>config<span class="token operator">/</span>config
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>config<span class="token operator">/</span>propertiesConfigure
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>logrus<span class="token operator">/</span>logger
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">&gt;</span>Use Env<span class="token operator">:</span> local
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level warning important">WARNING</span><span class="token operator">|</span>Init<span class="token operator">|</span><span class="token property">properties:</span> <span class="token file-path string">/var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build1582606196/b001/exe/config/default.properties</span> not found<span class="token punctuation">.</span> skipping
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level warning important">WARNING</span><span class="token operator">|</span>Init<span class="token operator">|</span><span class="token property">properties:</span> <span class="token file-path string">/var/folders/jv/rn9b7nhs2ls1n1j_lqj005r80000gn/T/go-build1582606196/b001/exe/config/local.properties</span> not found<span class="token punctuation">.</span> skipping
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level warning important">WARNING</span><span class="token operator">|</span>Init<span class="token operator">|</span><span class="token property">properties:</span> <span class="token file-path string">/Users/jim/works/gone-io/gone/example/use-rdb/config/local.properties</span> not found<span class="token punctuation">.</span> skipping
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>config<span class="token operator">/</span>config
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>config<span class="token operator">/</span>propertiesConfigure
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive github<span class="token punctuation">.</span>com<span class="token operator">/</span>gone<span class="token operator">-</span>io<span class="token operator">/</span>gone<span class="token operator">/</span>goner<span class="token operator">/</span>xorm<span class="token operator">/</span>engine
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.768</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span>Init<span class="token operator">|</span>Revive main<span class="token operator">/</span>SqlExecutor
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.769</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span><span class="token file-path string">/Users/jim/go/pkg/mod/xorm.io/xorm@v1.3.2/log/logger_context.go</span><span class="token operator">:</span><span class="token number">90</span><span class="token operator">|</span><span class="token operator">|</span>PING DATABASE mysql
<span class="token date number">2024-05-10</span> <span class="token time number">16:56:52.783</span><span class="token operator">|</span><span class="token level info keyword">INFO</span><span class="token operator">|</span><span class="token file-path string">/Users/jim/works/gone-io/gone/cemetery.go</span><span class="token operator">:</span><span class="token number">307</span><span class="token operator">|</span><span class="token operator">|</span>Revive <span class="token operator">/</span>
demo<span class="token operator">:</span><span class="token operator">{</span><span class="token number">1</span> hello gone<span class="token operator">}</span>
demo records<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">{</span><span class="token number">1</span> hello gone<span class="token operator">}</span> <span class="token operator">{</span><span class="token number">2</span> The most Spring programmer<span class="token operator">-</span>friendly Golang framework<span class="token punctuation">,</span> dependency injection<span class="token punctuation">,</span> integrates Web<span class="token punctuation">.</span> <span class="token operator">}</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="éœ€è¦æ³¨æ„çš„ç‚¹"><a href="#éœ€è¦æ³¨æ„çš„ç‚¹" class="header-anchor">#</a> éœ€è¦æ³¨æ„çš„ç‚¹</h2> <h3 id="_1-github-com-gone-io-gone-goner-æ˜¯å¯¹-xorm-io-xorm-çš„å°è£…"><a href="#_1-github-com-gone-io-gone-goner-æ˜¯å¯¹-xorm-io-xorm-çš„å°è£…" class="header-anchor">#</a> 1. <code>github.com/gone-io/gone/goner</code> æ˜¯å¯¹ <code>xorm.io/xorm</code> çš„å°è£…</h3> <p>å°è£…çš„å¤§æ¦‚é€»è¾‘æ˜¯ï¼šå°†xormåŒ…è£…ä¸ºä¸€ä¸ª<a href="https://goner.fun/zh/guide/core-concept.html#%F0%9F%98%87angel-%E5%A4%A9%E4%BD%BF" target="_blank" rel="noopener noreferrer">Angel Goner<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>;åœ¨Startæ–¹æ³•ä¸­å®Œæˆæ•°æ®çš„è¿æ¥ï¼›åœ¨Stopæ–¹æ³•ä¸­å…³é—­æ•°æ®åº“è¿æ¥ã€‚ä½¿ç”¨æ—¶ä¸éœ€è¦å¯¼å…¥<code>xorm.io/xorm</code>åŒ…ï¼Œåªéœ€è¦å¯¼å…¥<code>github.com/gone-io/gone/goner</code>å³å¯ã€‚å°è£…ä¸­ä¾èµ–äº†<code>github.com/gone-io/gone/tree/main/goner/config</code>æ¥å®ç°é…ç½®ï¼Œåœ¨<code>goner.XormPriest</code>å‡½æ•°ä¸­å·²ç»è‡ªåŠ¨å®Œæˆäº†é…ç½®ç›¸å…³çš„Gonerçš„<a href="https://goner.fun/zh/guide/core-concept.html#bury-%E5%9F%8B%E8%91%AC" target="_blank" rel="noopener noreferrer">åŸ‹è‘¬<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚
é…ç½®æ–‡ä»¶ä¸­æ”¯æŒçš„é…ç½®é¡¹ï¼š</p> <ul><li>database.driver-name é©±åŠ¨çš„åç§°ï¼Œæ”¯æŒ mysqlã€postgres ç­‰ä¸»æµæ•°æ®åº“ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ <a href="https://xorm.io/zh/docs/chapter-01/1.engine/" target="_blank" rel="noopener noreferrer">xormæ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>database.dsn æ•°æ®æºï¼Œå‚è€ƒ <a href="https://xorm.io/zh/docs/chapter-01/1.engine/" target="_blank" rel="noopener noreferrer">xormæ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>database.max-idle-count è¿æ¥æ± ï¼Œæœ€å¤§ç©ºé—²è¿æ¥æ•°</li> <li>database.max-open è¿æ¥æ± ï¼Œæœ€å¤§è¿æ¥æ•°</li> <li>database.max-lifetime æœ€å¤§ç”Ÿå­˜æ—¶é—´</li> <li>database.showSql æ˜¯å¦æ‰“å°æ‰§è¡Œçš„SQL</li></ul> <h3 id="_2-é€šè¿‡gone-xormgoneridæ³¨å…¥"><a href="#_2-é€šè¿‡gone-xormgoneridæ³¨å…¥" class="header-anchor">#</a> 2. é€šè¿‡<code>gone-xorm</code><strong>GonerId</strong>æ³¨å…¥</h3> <p>åœ¨éœ€è¦ä½¿ç”¨xormå¼•æ“çš„Gonerä¸­ï¼Œä½¿ç”¨<code>gone:&quot;gone-xorm&quot;</code>æ ‡ç­¾æ³¨å…¥<code>xorm.Engine</code>ï¼Œå±æ€§å¯ä»¥å…·åä¹Ÿå¯ä»¥åŒ¿åï¼š</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> XormUser <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token comment">//å…·å</span>
    db xorm<span class="token punctuation">.</span>Engine <span class="token string">`gone:&quot;gone-xorm&quot;`</span>
<span class="token punctuation">}</span>
<span class="token comment">// æˆ–è€…</span>
<span class="token keyword">type</span> XormUser <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token comment">//åŒ¿å</span>
    xorm<span class="token punctuation">.</span>Engine <span class="token string">`gone:&quot;gone-xorm&quot;`</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨<code>xorm.Engine</code>ä¸­â€œç»§æ‰¿â€äº†<code>xorm.io/xorm.EngineInterface</code>æ¥å£ï¼Œæ‰€ä»¥<code>xorm.Engine</code>æ”¯æŒ<a href="https://xorm.io/zh/docs/" target="_blank" rel="noopener noreferrer">xormæ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚</p> <h3 id="_3-æ³¨æ„å¯¼å…¥çš„åŒ…"><a href="#_3-æ³¨æ„å¯¼å…¥çš„åŒ…" class="header-anchor">#</a> 3. æ³¨æ„å¯¼å…¥çš„åŒ…</h3> <ul><li>éœ€è¦å¯¼å…¥æ•°æ®åº“çš„é©±åŠ¨ï¼Œä¸åŒæ•°æ®åº“å¯¼å…¥ä¸ä¸€æ ·ï¼š</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token boolean">_</span> <span class="token string">&quot;github.com/go-sql-driver/mysql&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><ul><li>å¯¼å…¥çš„xormåŒ…æ˜¯ï¼š<code>github.com/gone-io/gone/goner/xorm</code>ï¼Œä¸æ˜¯<code>xorm.io/xorm</code>:</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;github.com/gone-io/gone/goner/xorm&quot;</span> #ğŸ“¢âš ï¸éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯¼å…¥çš„æ˜¯goneå°è£…çš„xormåŒ…
<span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cc389081.js" defer></script><script src="/assets/js/2.ee202d8a.js" defer></script><script src="/assets/js/1.c48f06f0.js" defer></script><script src="/assets/js/37.0fe90fb0.js" defer></script>
  </body>
</html>
